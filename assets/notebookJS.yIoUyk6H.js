import"./pixel.CyAMObzi.js";/* empty css              */import{e as D,b as N,G as Ye,J as Xe,v as At,c as O,w as qt,x as Bt}from"./scc.2HUkD3uG.js";import{c as Vt,C as Mt}from"./codemirror.DN0ZcZMw.js";import{n as Rt}from"./index.browser.vcSNLBTf.js";import"https://webr.r-wasm.org/latest/webr.mjs";(function(o,u){(function(l){l(Vt)})(function(l){l.defineMode("javascript",function(y,s){var k=y.indentUnit,b=s.statementIndent,v=s.jsonld,h=s.json||v,T=s.trackScope!==!1,m=s.typescript,A=s.wordCharacters||/[\w$\xa1-\uffff]/,Y=function(){function e(_){return{type:_,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),a=e("keyword c"),f=e("keyword d"),g=e("operator"),E={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:f,break:f,continue:f,new:e("new"),delete:a,void:a,throw:a,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:g,typeof:g,instanceof:g,true:E,false:E,null:E,undefined:E,NaN:E,Infinity:E,this:e("this"),class:e("class"),super:e("atom"),yield:a,export:e("export"),import:e("import"),extends:a,await:a}}(),X=/[+\-*&%=<>!?|~^@]/,Le=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function De(e){for(var t=!1,n,a=!1;(n=e.next())!=null;){if(!t){if(n=="/"&&!a)return;n=="["?a=!0:a&&n=="]"&&(a=!1)}t=!t&&n=="\\"}}var ae,de;function C(e,t,n){return ae=e,de=n,t}function W(e,t){var n=e.next();if(n=='"'||n=="'")return t.tokenize=nt(n),t.tokenize(e,t);if(n=="."&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return C("number","number");if(n=="."&&e.match(".."))return C("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return C(n);if(n=="="&&e.eat(">"))return C("=>","operator");if(n=="0"&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return C("number","number");if(/\d/.test(n))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),C("number","number");if(n=="/")return e.eat("*")?(t.tokenize=me,me(e,t)):e.eat("/")?(e.skipToEnd(),C("comment","comment")):Je(e,t,1)?(De(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),C("regexp","string-2")):(e.eat("="),C("operator","operator",e.current()));if(n=="`")return t.tokenize=oe,oe(e,t);if(n=="#"&&e.peek()=="!")return e.skipToEnd(),C("meta","meta");if(n=="#"&&e.eatWhile(A))return C("variable","property");if(n=="<"&&e.match("!--")||n=="-"&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),C("comment","comment");if(X.test(n))return(n!=">"||!t.lexical||t.lexical.type!=">")&&(e.eat("=")?(n=="!"||n=="=")&&e.eat("="):/[<>*+\-|&?]/.test(n)&&(e.eat(n),n==">"&&e.eat(n))),n=="?"&&e.eat(".")?C("."):C("operator","operator",e.current());if(A.test(n)){e.eatWhile(A);var a=e.current();if(t.lastType!="."){if(Y.propertyIsEnumerable(a)){var f=Y[a];return C(f.type,f.style,a)}if(a=="async"&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return C("async","keyword",a)}return C("variable","variable",a)}}function nt(e){return function(t,n){var a=!1,f;if(v&&t.peek()=="@"&&t.match(Le))return n.tokenize=W,C("jsonld-keyword","meta");for(;(f=t.next())!=null&&!(f==e&&!a);)a=!a&&f=="\\";return a||(n.tokenize=W),C("string","string")}}function me(e,t){for(var n=!1,a;a=e.next();){if(a=="/"&&n){t.tokenize=W;break}n=a=="*"}return C("comment","comment")}function oe(e,t){for(var n=!1,a;(a=e.next())!=null;){if(!n&&(a=="`"||a=="$"&&e.eat("{"))){t.tokenize=W;break}n=!n&&a=="\\"}return C("quasi","string-2",e.current())}var it="([{}])";function xe(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(m){var a=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));a&&(n=a.index)}for(var f=0,g=!1,E=n-1;E>=0;--E){var _=e.string.charAt(E),R=it.indexOf(_);if(R>=0&&R<3){if(!f){++E;break}if(--f==0){_=="("&&(g=!0);break}}else if(R>=3&&R<6)++f;else if(A.test(_))g=!0;else if(/["'\/`]/.test(_))for(;;--E){if(E==0)return;var _t=e.string.charAt(E-1);if(_t==_&&e.string.charAt(E-2)!="\\"){E--;break}}else if(g&&!f){++E;break}}g&&!f&&(t.fatArrowAt=E)}}var at={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function _e(e,t,n,a,f,g){this.indented=e,this.column=t,this.type=n,this.prev=f,this.info=g,a!=null&&(this.align=a)}function ot(e,t){if(!T)return!1;for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var a=e.context;a;a=a.prev)for(var n=a.vars;n;n=n.next)if(n.name==t)return!0}function Ae(e,t,n,a,f){var g=e.cc;for(i.state=e,i.stream=f,i.marked=null,i.cc=g,i.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var E=g.length?g.pop():h?S:I;if(E(n,a)){for(;g.length&&g[g.length-1].lex;)g.pop()();return i.marked?i.marked:n=="variable"&&ot(e,a)?"variable-2":t}}}var i={state:null,column:null,marked:null,cc:null};function d(){for(var e=arguments.length-1;e>=0;e--)i.cc.push(arguments[e])}function r(){return d.apply(null,arguments),!0}function Ee(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function Z(e){var t=i.state;if(i.marked="def",!!T){if(t.context){if(t.lexical.info=="var"&&t.context&&t.context.block){var n=qe(e,t.context);if(n!=null){t.context=n;return}}else if(!Ee(e,t.localVars)){t.localVars=new ue(e,t.localVars);return}}s.globalVars&&!Ee(e,t.globalVars)&&(t.globalVars=new ue(e,t.globalVars))}}function qe(e,t){if(t)if(t.block){var n=qe(e,t.prev);return n?n==t.prev?t:new le(n,t.vars,!0):null}else return Ee(e,t.vars)?t:new le(t.prev,new ue(e,t.vars),!1);else return null}function pe(e){return e=="public"||e=="private"||e=="protected"||e=="abstract"||e=="readonly"}function le(e,t,n){this.prev=e,this.vars=t,this.block=n}function ue(e,t){this.name=e,this.next=t}var lt=new ue("this",new ue("arguments",null));function P(){i.state.context=new le(i.state.context,i.state.localVars,!1),i.state.localVars=lt}function ye(){i.state.context=new le(i.state.context,i.state.localVars,!0),i.state.localVars=null}P.lex=ye.lex=!0;function V(){i.state.localVars=i.state.context.vars,i.state.context=i.state.context.prev}V.lex=!0;function p(e,t){var n=function(){var a=i.state,f=a.indented;if(a.lexical.type=="stat")f=a.lexical.indented;else for(var g=a.lexical;g&&g.type==")"&&g.align;g=g.prev)f=g.indented;a.lexical=new _e(f,i.stream.column(),e,null,a.lexical,t)};return n.lex=!0,n}function c(){var e=i.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}c.lex=!0;function w(e){function t(n){return n==e?r():e==";"||n=="}"||n==")"||n=="]"?d():r(t)}return t}function I(e,t){return e=="var"?r(p("vardef",t),Ie,w(";"),c):e=="keyword a"?r(p("form"),Ne,I,c):e=="keyword b"?r(p("form"),I,c):e=="keyword d"?i.stream.match(/^\s*$/,!1)?r():r(p("stat"),ee,w(";"),c):e=="debugger"?r(w(";")):e=="{"?r(p("}"),ye,be,c,V):e==";"?r():e=="if"?(i.state.lexical.info=="else"&&i.state.cc[i.state.cc.length-1]==c&&i.state.cc.pop()(),r(p("form"),Ne,I,c,He)):e=="function"?r(F):e=="for"?r(p("form"),ye,ze,I,V,c):e=="class"||m&&t=="interface"?(i.marked="keyword",r(p("form",e=="class"?e:t),$e,c)):e=="variable"?m&&t=="declare"?(i.marked="keyword",r(I)):m&&(t=="module"||t=="enum"||t=="type")&&i.stream.match(/^\s*\w/,!1)?(i.marked="keyword",t=="enum"?r(Pe):t=="type"?r(Ue,w("operator"),x,w(";")):r(p("form"),M,w("{"),p("}"),be,c,c)):m&&t=="namespace"?(i.marked="keyword",r(p("form"),S,I,c)):m&&t=="abstract"?(i.marked="keyword",r(I)):r(p("stat"),mt):e=="switch"?r(p("form"),Ne,w("{"),p("}","switch"),ye,be,c,c,V):e=="case"?r(S,w(":")):e=="default"?r(w(":")):e=="catch"?r(p("form"),P,ut,I,c,V):e=="export"?r(p("stat"),Ct,c):e=="import"?r(p("stat"),Tt,c):e=="async"?r(I):t=="@"?r(S,I):d(p("stat"),S,w(";"),c)}function ut(e){if(e=="(")return r(K,w(")"))}function S(e,t){return Be(e,t,!1)}function q(e,t){return Be(e,t,!0)}function Ne(e){return e!="("?d():r(p(")"),ee,w(")"),c)}function Be(e,t,n){if(i.state.fatArrowAt==i.stream.start){var a=n?Me:Ve;if(e=="(")return r(P,p(")"),j(K,")"),c,w("=>"),a,V);if(e=="variable")return d(P,M,w("=>"),a,V)}var f=n?te:J;return at.hasOwnProperty(e)?r(f):e=="function"?r(F,f):e=="class"||m&&t=="interface"?(i.marked="keyword",r(p("form"),St,c)):e=="keyword c"||e=="async"?r(n?q:S):e=="("?r(p(")"),ee,w(")"),c,f):e=="operator"||e=="spread"?r(n?q:S):e=="["?r(p("]"),jt,c,f):e=="{"?se(he,"}",null,f):e=="quasi"?d(ke,f):e=="new"?r(ct(n)):r()}function ee(e){return e.match(/[;\}\)\],]/)?d():d(S)}function J(e,t){return e==","?r(ee):te(e,t,!1)}function te(e,t,n){var a=n==!1?J:te,f=n==!1?S:q;if(e=="=>")return r(P,n?Me:Ve,V);if(e=="operator")return/\+\+|--/.test(t)||m&&t=="!"?r(a):m&&t=="<"&&i.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?r(p(">"),j(x,">"),c,a):t=="?"?r(S,w(":"),f):r(f);if(e=="quasi")return d(ke,a);if(e!=";"){if(e=="(")return se(q,")","call",a);if(e==".")return r(pt,a);if(e=="[")return r(p("]"),ee,w("]"),c,a);if(m&&t=="as")return i.marked="keyword",r(x,a);if(e=="regexp")return i.state.lastType=i.marked="operator",i.stream.backUp(i.stream.pos-i.stream.start-1),r(f)}}function ke(e,t){return e!="quasi"?d():t.slice(t.length-2)!="${"?r(ke):r(ee,st)}function st(e){if(e=="}")return i.marked="string-2",i.state.tokenize=oe,r(ke)}function Ve(e){return xe(i.stream,i.state),d(e=="{"?I:S)}function Me(e){return xe(i.stream,i.state),d(e=="{"?I:q)}function ct(e){return function(t){return t=="."?r(e?dt:ft):t=="variable"&&m?r(gt,e?te:J):d(e?q:S)}}function ft(e,t){if(t=="target")return i.marked="keyword",r(J)}function dt(e,t){if(t=="target")return i.marked="keyword",r(te)}function mt(e){return e==":"?r(c,I):d(J,w(";"),c)}function pt(e){if(e=="variable")return i.marked="property",r()}function he(e,t){if(e=="async")return i.marked="property",r(he);if(e=="variable"||i.style=="keyword"){if(i.marked="property",t=="get"||t=="set")return r(yt);var n;return m&&i.state.fatArrowAt==i.stream.start&&(n=i.stream.match(/^\s*:\s*/,!1))&&(i.state.fatArrowAt=i.stream.pos+n[0].length),r(Q)}else{if(e=="number"||e=="string")return i.marked=v?"property":i.style+" property",r(Q);if(e=="jsonld-keyword")return r(Q);if(m&&pe(t))return i.marked="keyword",r(he);if(e=="[")return r(S,re,w("]"),Q);if(e=="spread")return r(q,Q);if(t=="*")return i.marked="keyword",r(he);if(e==":")return d(Q)}}function yt(e){return e!="variable"?d(Q):(i.marked="property",r(F))}function Q(e){if(e==":")return r(q);if(e=="(")return d(F)}function j(e,t,n){function a(f,g){if(n?n.indexOf(f)>-1:f==","){var E=i.state.lexical;return E.info=="call"&&(E.pos=(E.pos||0)+1),r(function(_,R){return _==t||R==t?d():d(e)},a)}return f==t||g==t?r():n&&n.indexOf(";")>-1?d(e):r(w(t))}return function(f,g){return f==t||g==t?r():d(e,a)}}function se(e,t,n){for(var a=3;a<arguments.length;a++)i.cc.push(arguments[a]);return r(p(t,n),j(e,t),c)}function be(e){return e=="}"?r():d(I,be)}function re(e,t){if(m){if(e==":")return r(x);if(t=="?")return r(re)}}function kt(e,t){if(m&&(e==":"||t=="in"))return r(x)}function Re(e){if(m&&e==":")return i.stream.match(/^\s*\w+\s+is\b/,!1)?r(S,ht,x):r(x)}function ht(e,t){if(t=="is")return i.marked="keyword",r()}function x(e,t){if(t=="keyof"||t=="typeof"||t=="infer"||t=="readonly")return i.marked="keyword",r(t=="typeof"?q:x);if(e=="variable"||t=="void")return i.marked="type",r(H);if(t=="|"||t=="&")return r(x);if(e=="string"||e=="number"||e=="atom")return r(H);if(e=="[")return r(p("]"),j(x,"]",","),c,H);if(e=="{")return r(p("}"),Se,c,H);if(e=="(")return r(j(Te,")"),bt,H);if(e=="<")return r(j(x,">"),x);if(e=="quasi")return d(Ce,H)}function bt(e){if(e=="=>")return r(x)}function Se(e){return e.match(/[\}\)\]]/)?r():e==","||e==";"?r(Se):d(ce,Se)}function ce(e,t){if(e=="variable"||i.style=="keyword")return i.marked="property",r(ce);if(t=="?"||e=="number"||e=="string")return r(ce);if(e==":")return r(x);if(e=="[")return r(w("variable"),kt,w("]"),ce);if(e=="(")return d(ie,ce);if(!e.match(/[;\}\)\],]/))return r()}function Ce(e,t){return e!="quasi"?d():t.slice(t.length-2)!="${"?r(Ce):r(x,wt)}function wt(e){if(e=="}")return i.marked="string-2",i.state.tokenize=oe,r(Ce)}function Te(e,t){return e=="variable"&&i.stream.match(/^\s*[?:]/,!1)||t=="?"?r(Te):e==":"?r(x):e=="spread"?r(Te):d(x)}function H(e,t){if(t=="<")return r(p(">"),j(x,">"),c,H);if(t=="|"||e=="."||t=="&")return r(x);if(e=="[")return r(x,w("]"),H);if(t=="extends"||t=="implements")return i.marked="keyword",r(x);if(t=="?")return r(x,w(":"),x)}function gt(e,t){if(t=="<")return r(p(">"),j(x,">"),c,H)}function we(){return d(x,vt)}function vt(e,t){if(t=="=")return r(x)}function Ie(e,t){return t=="enum"?(i.marked="keyword",r(Pe)):d(M,re,$,Et)}function M(e,t){if(m&&pe(t))return i.marked="keyword",r(M);if(e=="variable")return Z(t),r();if(e=="spread")return r(M);if(e=="[")return se(xt,"]");if(e=="{")return se(Oe,"}")}function Oe(e,t){return e=="variable"&&!i.stream.match(/^\s*:/,!1)?(Z(t),r($)):(e=="variable"&&(i.marked="property"),e=="spread"?r(M):e=="}"?d():e=="["?r(S,w("]"),w(":"),Oe):r(w(":"),M,$))}function xt(){return d(M,$)}function $(e,t){if(t=="=")return r(q)}function Et(e){if(e==",")return r(Ie)}function He(e,t){if(e=="keyword b"&&t=="else")return r(p("form","else"),I,c)}function ze(e,t){if(t=="await")return r(ze);if(e=="(")return r(p(")"),Nt,c)}function Nt(e){return e=="var"?r(Ie,ne):e=="variable"?r(ne):d(ne)}function ne(e,t){return e==")"?r():e==";"?r(ne):t=="in"||t=="of"?(i.marked="keyword",r(S,ne)):d(S,ne)}function F(e,t){if(t=="*")return i.marked="keyword",r(F);if(e=="variable")return Z(t),r(F);if(e=="(")return r(P,p(")"),j(K,")"),c,Re,I,V);if(m&&t=="<")return r(p(">"),j(we,">"),c,F)}function ie(e,t){if(t=="*")return i.marked="keyword",r(ie);if(e=="variable")return Z(t),r(ie);if(e=="(")return r(P,p(")"),j(K,")"),c,Re,V);if(m&&t=="<")return r(p(">"),j(we,">"),c,ie)}function Ue(e,t){if(e=="keyword"||e=="variable")return i.marked="type",r(Ue);if(t=="<")return r(p(">"),j(we,">"),c)}function K(e,t){return t=="@"&&r(S,K),e=="spread"?r(K):m&&pe(t)?(i.marked="keyword",r(K)):m&&e=="this"?r(re,$):d(M,re,$)}function St(e,t){return e=="variable"?$e(e,t):ge(e,t)}function $e(e,t){if(e=="variable")return Z(t),r(ge)}function ge(e,t){if(t=="<")return r(p(">"),j(we,">"),c,ge);if(t=="extends"||t=="implements"||m&&e==",")return t=="implements"&&(i.marked="keyword"),r(m?x:S,ge);if(e=="{")return r(p("}"),z,c)}function z(e,t){if(e=="async"||e=="variable"&&(t=="static"||t=="get"||t=="set"||m&&pe(t))&&i.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return i.marked="keyword",r(z);if(e=="variable"||i.style=="keyword")return i.marked="property",r(fe,z);if(e=="number"||e=="string")return r(fe,z);if(e=="[")return r(S,re,w("]"),fe,z);if(t=="*")return i.marked="keyword",r(z);if(m&&e=="(")return d(ie,z);if(e==";"||e==",")return r(z);if(e=="}")return r();if(t=="@")return r(S,z)}function fe(e,t){if(t=="!"||t=="?")return r(fe);if(e==":")return r(x,$);if(t=="=")return r(q);var n=i.state.lexical.prev,a=n&&n.info=="interface";return d(a?ie:F)}function Ct(e,t){return t=="*"?(i.marked="keyword",r(je,w(";"))):t=="default"?(i.marked="keyword",r(S,w(";"))):e=="{"?r(j(Fe,"}"),je,w(";")):d(I)}function Fe(e,t){if(t=="as")return i.marked="keyword",r(w("variable"));if(e=="variable")return d(q,Fe)}function Tt(e){return e=="string"?r():e=="("?d(S):e=="."?d(J):d(ve,We,je)}function ve(e,t){return e=="{"?se(ve,"}"):(e=="variable"&&Z(t),t=="*"&&(i.marked="keyword"),r(It))}function We(e){if(e==",")return r(ve,We)}function It(e,t){if(t=="as")return i.marked="keyword",r(ve)}function je(e,t){if(t=="from")return i.marked="keyword",r(S)}function jt(e){return e=="]"?r():d(j(q,"]"))}function Pe(){return d(p("form"),M,w("{"),p("}"),j(Lt,"}"),c,c)}function Lt(){return d(M,$)}function Dt(e,t){return e.lastType=="operator"||e.lastType==","||X.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}function Je(e,t,n){return t.tokenize==W&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||t.lastType=="quasi"&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return{startState:function(e){var t={tokenize:W,lastType:"sof",cc:[],lexical:new _e((e||0)-k,0,"block",!1),localVars:s.localVars,context:s.localVars&&new le(null,null,!1),indented:e||0};return s.globalVars&&typeof s.globalVars=="object"&&(t.globalVars=s.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),xe(e,t)),t.tokenize!=me&&e.eatSpace())return null;var n=t.tokenize(e,t);return ae=="comment"?n:(t.lastType=ae=="operator"&&(de=="++"||de=="--")?"incdec":ae,Ae(t,n,ae,de,e))},indent:function(e,t){if(e.tokenize==me||e.tokenize==oe)return l.Pass;if(e.tokenize!=W)return 0;var n=t&&t.charAt(0),a=e.lexical,f;if(!/^\s*else\b/.test(t))for(var g=e.cc.length-1;g>=0;--g){var E=e.cc[g];if(E==c)a=a.prev;else if(E!=He&&E!=V)break}for(;(a.type=="stat"||a.type=="form")&&(n=="}"||(f=e.cc[e.cc.length-1])&&(f==J||f==te)&&!/^[,\.=+\-*:?[\(]/.test(t));)a=a.prev;b&&a.type==")"&&a.prev.type=="stat"&&(a=a.prev);var _=a.type,R=n==_;return _=="vardef"?a.indented+(e.lastType=="operator"||e.lastType==","?a.info.length+1:0):_=="form"&&n=="{"?a.indented:_=="form"?a.indented+k:_=="stat"?a.indented+(Dt(e,t)?b||k:0):a.info=="switch"&&!R&&s.doubleIndentSwitch!=!1?a.indented+(/^(?:case|default)\b/.test(t)?k:2*k):a.align?a.column+(R?0:1):a.indented+(R?0:k)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:h?null:"/*",blockCommentEnd:h?null:"*/",blockCommentContinue:h?null:" * ",lineComment:h?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:h?"json":"javascript",jsonldMode:v,jsonMode:h,expressionAllowed:Je,skipExpression:function(e){Ae(e,"atom","atom","true",new l.StringStream("",2,null))}}}),l.registerHelper("wordChars","javascript",/[\w$]/),l.defineMIME("text/javascript","javascript"),l.defineMIME("text/ecmascript","javascript"),l.defineMIME("application/javascript","javascript"),l.defineMIME("application/x-javascript","javascript"),l.defineMIME("application/ecmascript","javascript"),l.defineMIME("application/json",{name:"javascript",json:!0}),l.defineMIME("application/x-json",{name:"javascript",json:!0}),l.defineMIME("application/manifest+json",{name:"javascript",json:!0}),l.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),l.defineMIME("text/typescript",{name:"javascript",typescript:!0}),l.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();function Ot(o,u,l,y,s){const k=document.getElementById(o),b=new Xe,v=Mt(k.querySelector("div.computelite-text-editor"),{lineNumbers:!0,lineWrapping:!0,mode:"javascript",autoRefresh:!0,autofocus:!0,tabSize:4,indentUnit:4,extraKeys:{"Ctrl-Enter":async h=>Qe(v,k,b,u,l,s)}});return v.addKeyMap({Backspace:function(h){Ht(h)}}),setTimeout(()=>{v.refresh(),y&&v.setValue(y)},10),k.querySelector("button.cell-controls-button").onclick=function(){Qe(v,k,b,u,l)},v}async function Qe(o,u,l,y,s,k){o.getInputField().blur();const b=o.getValue();u.querySelector(".cell-bottom").innerHTML="",u.querySelector(".sidebar-inner")&&(u.querySelector(".sidebar-inner").innerHTML=""),Ke(u,!0),await D("updateData",y,"UPDATE S_NotebookContent SET CellContent = ? WHERE CellId = ? AND CellType = ? AND NotebookId = ?",[b,s,"javascript",k]);const v=N("div");u.querySelector(".cell-bottom").appendChild(v),window.thisDiv=v,window.applyCss=function(m){et(m)};const h=console.log;console.log=(...m)=>{Ye(u,[m.join(" ")]),h.apply(console,m)};const T=await l.run(b);console.log=h,Ke(u,!1),zt(u,T,v)}function Ke(o,u){const l=o.querySelector("span.fa-regular");l&&(l.classList.toggle("fa-play-circle",!u),l.classList.toggle("fa-hourglass",u))}function Ht(o){const u=o.getCursor(),l=o.getLine(u.line),y=o.getOption("indentUnit");/^\s*$/.test(l.slice(0,u.ch))&&u.ch>0?o.setCursor({line:u.line,ch:Math.max(0,u.ch-y)}):o.execCommand("delCharBefore")}function zt(o,u,l){const{value:y,error:s}=u;if(!Ze(y,l)&&y!==void 0&&Ye(o,[y],s?"error":void 0),s)throw y}function Ze(o,u){return o instanceof HTMLElement?(u.appendChild(o),!0):!1}async function Ut(o,u,l){o.innerHTML="",o.style="width:100% !important",o.parentNode.style="width:100% !important",o.classList.remove("cell-position");const s=await D("fetchData",u,"SELECT CellId,CellContent FROM S_NotebookContent WHERE Name = ? AND CellType = ?",[l,"javascript"]);for(let k of s){const b=N("computelite-cell");b.setAttribute("tabindex","0");const v=N("div","cell-bottom"),h=N("div");window.thisDiv=h,window.applyStyle=async function(T){et(T)},v.appendChild(h),b.appendChild(v),o.appendChild(b),await $t(k[1],h)}}function et(o,u){let l=document.createElement("style");l.innerHTML=o,document.head.appendChild(l)}async function $t(o,u){const y=await new Xe().run(o);if(!Ze(y.value,u)&&y.error)throw y.value}const Ft=new URLSearchParams(window.location.search);let L=Ft.get("modelName"),U=!1;const B=document.getElementById("cellContainer");let Ge={};window.onload=async function(){Ge=await At();try{window.loadCDNScripts=async function(l){const y=(s,k)=>new Promise((b,v)=>{if(k&&window[k]){b(window[k]);return}const h=document.createElement("script");h.src=s,h.async=!0,h.onload=()=>b(window[k]||!0),h.onerror=()=>v(new Error(`Failed to load script: ${s}`)),document.head.appendChild(h)});return Promise.all(l.map(s=>y(s.url,s.globalVar)))},window.loadCDNStylesheets=async function(l){return Promise.all(l.map(({url:y})=>new Promise((s,k)=>{const b=document.createElement("link");b.rel="stylesheet",b.href=y,b.onload=()=>s(y),b.onerror=()=>k(`Failed to load CSS: ${y}`),document.head.appendChild(b)})))};let o=await D("init");if(!o||o.msg!="Success"){O("Alert!","Some error occured while initializing sqlite.");return}if(!L&&!((await qt("home","getUserModels")).some(s=>s[0]==="Default_DB")?"Default_DB":(await Bt(Ge))[0]||null)){O("Alert!","Model Name not found in the URL.");return}window.getData=async(l,y=[])=>D("getData",L,l,y),window.executeQuery=async(l,y=[])=>D("updateData",L,l,y),await rt();let u=document.getElementById("jsListDiv").querySelector("li.selectedValue");await G(u.innerText)}catch(o){O("",`Error during initialization:, ${o}`),console.error("Error during initialization:",o);return}};async function G(o){document.getElementById("loadingOverlay").classList.remove("hidden");try{(await D("fetchData",L,"SELECT CellId,CellContent,NotebookId FROM S_NotebookContent WHERE Name = ? AND CellType = ?",[o,"javascript"])).forEach(([y,s,k])=>tt(y,k,s))}catch(u){console.error("Error populating cells:",u)}finally{document.getElementById("loadingOverlay").classList.add("hidden")}}function tt(o,u,l=""){const y=Rt(),s=N("computelite-cell","cell-grid cell-container celltype-python",y);s.setAttribute("tabindex","0");const k=N("div","cell-controls cell-controls-left cell-controls-left-top"),b=N("button","btn cell-controls-button py-1");b.title="Run Cell";const v=N("span","fa-regular fa-play-circle");v.style.fontSize="16px",b.appendChild(v),k.appendChild(b);const h=N("div","cell-top flush");let T=N("div");T.style="position: relative;width: 100%;height: 0;";const m=N("div","computelite-text-editor-controls",null,N("div"));m.firstChild.appendChild(N("button","btn btn-small transparent p-1 px-1 me-1",null,N("span","fa-solid fa-trash-alt"))),m.querySelector("button").title="Delete Cell",m.querySelector("span").style="color: #00000066;",m.querySelector("button").onclick=async function(){await D("deleteData",L,"DELETE FROM S_NotebookContent WHERE CellId = ? AND CellType = ? AND NotebookId = ?",[o,"javascript",u])&&s.remove()};const A=N("computelite-text-editor"),Y=N("div","computelite-text-editor");T.appendChild(m),A.appendChild(T),A.appendChild(Y),h.appendChild(A),s.appendChild(k),s.appendChild(h);const X=N("div","cell-bottom");s.appendChild(X),B.appendChild(s),Ot(y,L,o,l,u)}document.getElementById("addCell").onclick=async function(){let o=document.getElementById("jsListDiv").querySelector("li.selectedValue"),u=o.getAttribute("id");if(!L){O("Alert!","Model Name not found in the URL.");return}try{let l=await D("insertData",L,"INSERT INTO S_NotebookContent (CellContent, Name, NotebookId, CellType) VALUES (?, ?, ?, ?)",["",o.innerText,u,"javascript"]);tt(l,u)}catch(l){console.error("Error adding cell:",l)}};document.getElementById("hideCode").onclick=async function(){try{let o=document.getElementById("jsListDiv").querySelector("li.selectedValue");U?(document.getElementById("addCell").style.display="",this.innerText="Hide Code",B.innerHTML="",B.style="width:80% !important",B.parentNode.style="width:80% !important",document.getElementById("sidebarMenu").classList.contains("contracted")&&B.classList.add("cell-position"),await G(o.innerText)):(await Ut(B,L,o.innerText),this.innerText="Show Code",document.getElementById("addCell").style.display="none"),U=!U}catch(o){console.error("Error toggling cells:",o)}};async function rt(){try{let o=document.getElementById("jsListDiv"),l=await D("fetchData",L,"SELECT Name, NotebookId FROM S_Notebooks WHERE Status = 'Active' AND Type = 'Javascript'"),y=new Set;if(l.length>0){for(let s of l)if(s[0]&&!y.has(s[0])){y.add(s[0]);let k=N("li","py-0 ps-1",s[1],null),b=N("label","checkBox-label",null,N("span","fas fa-file-alt"),null);b.appendChild(document.createTextNode(s[0])),k.appendChild(b),o.appendChild(k),k.onclick=async function(v){for(let T of document.getElementById("jsListDiv").querySelectorAll("li.selectedValue"))T.classList.remove("selectedValue");this.classList.add("selectedValue"),B.innerHTML="";let h=document.getElementById("hideCode");if(U){U=!1,await h.onclick();return}await G(this.innerText)}}o.firstElementChild.classList.add("selectedValue")}else{let k=await D("insertData",L,"INSERT INTO S_Notebooks (Name,Type,Status) VALUES (?, ?, ?) RETURNING NotebookId",["Default","Javascript","Active"]);await D("insertData",L,"INSERT INTO S_NotebookContent (Name,CellContent,CellType,NotebookId) VALUES (?, ?, ?, ?)",["Default","","javascript",k]);let v=N("li","py-0 ps-1",k,null),h=N("label","checkBox-label",null,N("span","fas fa-file-alt"),null);h.appendChild(document.createTextNode("Default")),v.appendChild(h),o.appendChild(v),v.classList.add("selectedValue"),B.innerHTML="",v.onclick=async function(T){for(let A of o.querySelectorAll("li.selectedValue"))A.classList.remove("selectedValue");this.classList.add("selectedValue"),B.innerHTML="";let m=document.getElementById("hideCode");if(U){U=!1,await m.onclick();return}await G(this.innerText)}}}catch(o){O("Alert!",`Error during execution:, ${o}`),console.error("Error during execution:",o);return}}document.getElementById("addNotebook").onclick=async function(){document.getElementById("inputDiv").classList.remove("d-none"),document.getElementById("notebookName").focus()};document.getElementById("notebookName").onkeydown=async function(o){try{if(o.key==="Enter"){o.preventDefault();const u=o.target.value.trim();if(o.target.value="",u===""){O("Alert!","Please enter Notebook Name.");return}if(!/^[^\s]+$/.test(u)){O("Alert!","Please enter a valid Notebook Name.");return}if((await D("fetchData",L,"SELECT name FROM S_Notebooks WHERE name = ? AND Type = 'Javascript'",[u])).length>0){O("Alert!","Notebook Name Already Exists");return}let b=await D("insertData",L,"INSERT INTO S_Notebooks (Name,Type,Status) VALUES (?, ?, ?) RETURNING NotebookId",[u,"Javascript","Active"]);await D("insertData",L,"INSERT INTO S_NotebookContent (CellContent, Name, NotebookId, CellType) VALUES (?, ?, ?, ?)",["",u,b,"javascript"]),document.getElementById("inputDiv").classList.add("d-none");let h=document.getElementById("jsListDiv"),T=N("li","py-0 ps-1",b,null),m=N("label","checkBox-label",null,N("span","fas fa-file-alt"),null);m.appendChild(document.createTextNode(u)),T.appendChild(m),h.appendChild(T);for(let A of h.querySelectorAll("li.selectedValue"))A.classList.remove("selectedValue");T.classList.add("selectedValue"),B.innerHTML="",await G(u),T.onclick=async function(A){for(let X of h.querySelectorAll("li.selectedValue"))X.classList.remove("selectedValue");this.classList.add("selectedValue"),B.innerHTML="";let Y=document.getElementById("hideCode");if(U){U=!1,await Y.onclick();return}await G(this.innerText)}}}catch(u){console.error("Error adding notebook:",u)}};document.getElementById("deleteNotebook").onclick=function(){let o=document.getElementById("jsListDiv").querySelector("li.selectedValue");o?O("",`Are You Sure Want to Delete ${o.innerText}`,Wt.bind(null,o),1):O("Alert!","No Notebook Selected to delete")};async function Wt(o){let u=o.getAttribute("id");await D("deleteData",L,"DELETE FROM S_Notebooks WHERE NotebookId = ? ",[u]);const s=await D("deleteData",L,"DELETE FROM S_NotebookContent WHERE NotebookId = ? AND CellType = 'javascript'",[u]);for(let b of document.querySelectorAll("computelite-cell"))s&&b.remove();document.getElementById("jsListDiv").innerHTML="",await rt();let k=document.getElementById("jsListDiv").querySelector("li.selectedValue");await G(k.innerText)}document.getElementById("toggleSidebar").onclick=function(){document.getElementById("sidebarMenu").classList.toggle("contracted"),B.classList.toggle("cell-position"),document.getElementById("inputDiv").classList.add("d-none")};
