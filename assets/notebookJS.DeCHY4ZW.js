import"./pixel.PHV1U_RE.js";/* empty css              */import{e as D,b as N,G as Ye,J as Xe,v as At,c as O,w as qt,x as Vt}from"./scc.BdpBWn71.js";import{r as Bt,C as Mt}from"./codemirror.BeiFTLV5.js";import{n as Rt}from"./index.browser.vcSNLBTf.js";import"https://webr.r-wasm.org/latest/webr.mjs";(function(a,u){(function(l){l(Bt())})(function(l){l.defineMode("javascript",function(y,s){var k=y.indentUnit,b=s.statementIndent,v=s.jsonld,h=s.json||v,L=s.trackScope!==!1,m=s.typescript,V=s.wordCharacters||/[\w$\xa1-\uffff]/,G=function(){function e(_){return{type:_,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),o=e("keyword c"),f=e("keyword d"),g=e("operator"),E={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:f,break:f,continue:f,new:e("new"),delete:o,void:o,throw:o,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:g,typeof:g,instanceof:g,true:E,false:E,null:E,undefined:E,NaN:E,Infinity:E,this:e("this"),class:e("class"),super:e("atom"),yield:o,export:e("export"),import:e("import"),extends:o,await:o}}(),fe=/[+\-*&%=<>!?|~^@]/,Le=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function De(e){for(var t=!1,n,o=!1;(n=e.next())!=null;){if(!t){if(n=="/"&&!o)return;n=="["?o=!0:o&&n=="]"&&(o=!1)}t=!t&&n=="\\"}}var ie,de;function T(e,t,n){return ie=e,de=n,t}function F(e,t){var n=e.next();if(n=='"'||n=="'")return t.tokenize=nt(n),t.tokenize(e,t);if(n=="."&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return T("number","number");if(n=="."&&e.match(".."))return T("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return T(n);if(n=="="&&e.eat(">"))return T("=>","operator");if(n=="0"&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return T("number","number");if(/\d/.test(n))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),T("number","number");if(n=="/")return e.eat("*")?(t.tokenize=me,me(e,t)):e.eat("/")?(e.skipToEnd(),T("comment","comment")):Je(e,t,1)?(De(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),T("regexp","string-2")):(e.eat("="),T("operator","operator",e.current()));if(n=="`")return t.tokenize=oe,oe(e,t);if(n=="#"&&e.peek()=="!")return e.skipToEnd(),T("meta","meta");if(n=="#"&&e.eatWhile(V))return T("variable","property");if(n=="<"&&e.match("!--")||n=="-"&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),T("comment","comment");if(fe.test(n))return(n!=">"||!t.lexical||t.lexical.type!=">")&&(e.eat("=")?(n=="!"||n=="=")&&e.eat("="):/[<>*+\-|&?]/.test(n)&&(e.eat(n),n==">"&&e.eat(n))),n=="?"&&e.eat(".")?T("."):T("operator","operator",e.current());if(V.test(n)){e.eatWhile(V);var o=e.current();if(t.lastType!="."){if(G.propertyIsEnumerable(o)){var f=G[o];return T(f.type,f.style,o)}if(o=="async"&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return T("async","keyword",o)}return T("variable","variable",o)}}function nt(e){return function(t,n){var o=!1,f;if(v&&t.peek()=="@"&&t.match(Le))return n.tokenize=F,T("jsonld-keyword","meta");for(;(f=t.next())!=null&&!(f==e&&!o);)o=!o&&f=="\\";return o||(n.tokenize=F),T("string","string")}}function me(e,t){for(var n=!1,o;o=e.next();){if(o=="/"&&n){t.tokenize=F;break}n=o=="*"}return T("comment","comment")}function oe(e,t){for(var n=!1,o;(o=e.next())!=null;){if(!n&&(o=="`"||o=="$"&&e.eat("{"))){t.tokenize=F;break}n=!n&&o=="\\"}return T("quasi","string-2",e.current())}var it="([{}])";function xe(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(m){var o=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));o&&(n=o.index)}for(var f=0,g=!1,E=n-1;E>=0;--E){var _=e.string.charAt(E),R=it.indexOf(_);if(R>=0&&R<3){if(!f){++E;break}if(--f==0){_=="("&&(g=!0);break}}else if(R>=3&&R<6)++f;else if(V.test(_))g=!0;else if(/["'\/`]/.test(_))for(;;--E){if(E==0)return;var _t=e.string.charAt(E-1);if(_t==_&&e.string.charAt(E-2)!="\\"){E--;break}}else if(g&&!f){++E;break}}g&&!f&&(t.fatArrowAt=E)}}var ot={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function _e(e,t,n,o,f,g){this.indented=e,this.column=t,this.type=n,this.prev=f,this.info=g,o!=null&&(this.align=o)}function at(e,t){if(!L)return!1;for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var o=e.context;o;o=o.prev)for(var n=o.vars;n;n=n.next)if(n.name==t)return!0}function Ae(e,t,n,o,f){var g=e.cc;for(i.state=e,i.stream=f,i.marked=null,i.cc=g,i.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var E=g.length?g.pop():h?S:C;if(E(n,o)){for(;g.length&&g[g.length-1].lex;)g.pop()();return i.marked?i.marked:n=="variable"&&at(e,o)?"variable-2":t}}}var i={state:null,column:null,marked:null,cc:null};function d(){for(var e=arguments.length-1;e>=0;e--)i.cc.push(arguments[e])}function r(){return d.apply(null,arguments),!0}function Ee(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function Y(e){var t=i.state;if(i.marked="def",!!L){if(t.context){if(t.lexical.info=="var"&&t.context&&t.context.block){var n=qe(e,t.context);if(n!=null){t.context=n;return}}else if(!Ee(e,t.localVars)){t.localVars=new le(e,t.localVars);return}}s.globalVars&&!Ee(e,t.globalVars)&&(t.globalVars=new le(e,t.globalVars))}}function qe(e,t){if(t)if(t.block){var n=qe(e,t.prev);return n?n==t.prev?t:new ae(n,t.vars,!0):null}else return Ee(e,t.vars)?t:new ae(t.prev,new le(e,t.vars),!1);else return null}function pe(e){return e=="public"||e=="private"||e=="protected"||e=="abstract"||e=="readonly"}function ae(e,t,n){this.prev=e,this.vars=t,this.block=n}function le(e,t){this.name=e,this.next=t}var lt=new le("this",new le("arguments",null));function W(){i.state.context=new ae(i.state.context,i.state.localVars,!1),i.state.localVars=lt}function ye(){i.state.context=new ae(i.state.context,i.state.localVars,!0),i.state.localVars=null}W.lex=ye.lex=!0;function B(){i.state.localVars=i.state.context.vars,i.state.context=i.state.context.prev}B.lex=!0;function p(e,t){var n=function(){var o=i.state,f=o.indented;if(o.lexical.type=="stat")f=o.lexical.indented;else for(var g=o.lexical;g&&g.type==")"&&g.align;g=g.prev)f=g.indented;o.lexical=new _e(f,i.stream.column(),e,null,o.lexical,t)};return n.lex=!0,n}function c(){var e=i.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}c.lex=!0;function w(e){function t(n){return n==e?r():e==";"||n=="}"||n==")"||n=="]"?d():r(t)}return t}function C(e,t){return e=="var"?r(p("vardef",t),Ie,w(";"),c):e=="keyword a"?r(p("form"),Ne,C,c):e=="keyword b"?r(p("form"),C,c):e=="keyword d"?i.stream.match(/^\s*$/,!1)?r():r(p("stat"),X,w(";"),c):e=="debugger"?r(w(";")):e=="{"?r(p("}"),ye,be,c,B):e==";"?r():e=="if"?(i.state.lexical.info=="else"&&i.state.cc[i.state.cc.length-1]==c&&i.state.cc.pop()(),r(p("form"),Ne,C,c,He)):e=="function"?r($):e=="for"?r(p("form"),ye,ze,C,B,c):e=="class"||m&&t=="interface"?(i.marked="keyword",r(p("form",e=="class"?e:t),$e,c)):e=="variable"?m&&t=="declare"?(i.marked="keyword",r(C)):m&&(t=="module"||t=="enum"||t=="type")&&i.stream.match(/^\s*\w/,!1)?(i.marked="keyword",t=="enum"?r(Pe):t=="type"?r(Ue,w("operator"),x,w(";")):r(p("form"),M,w("{"),p("}"),be,c,c)):m&&t=="namespace"?(i.marked="keyword",r(p("form"),S,C,c)):m&&t=="abstract"?(i.marked="keyword",r(C)):r(p("stat"),mt):e=="switch"?r(p("form"),Ne,w("{"),p("}","switch"),ye,be,c,c,B):e=="case"?r(S,w(":")):e=="default"?r(w(":")):e=="catch"?r(p("form"),W,ut,C,c,B):e=="export"?r(p("stat"),Tt,c):e=="import"?r(p("stat"),Ct,c):e=="async"?r(C):t=="@"?r(S,C):d(p("stat"),S,w(";"),c)}function ut(e){if(e=="(")return r(Q,w(")"))}function S(e,t){return Ve(e,t,!1)}function A(e,t){return Ve(e,t,!0)}function Ne(e){return e!="("?d():r(p(")"),X,w(")"),c)}function Ve(e,t,n){if(i.state.fatArrowAt==i.stream.start){var o=n?Me:Be;if(e=="(")return r(W,p(")"),I(Q,")"),c,w("=>"),o,B);if(e=="variable")return d(W,M,w("=>"),o,B)}var f=n?Z:P;return ot.hasOwnProperty(e)?r(f):e=="function"?r($,f):e=="class"||m&&t=="interface"?(i.marked="keyword",r(p("form"),St,c)):e=="keyword c"||e=="async"?r(n?A:S):e=="("?r(p(")"),X,w(")"),c,f):e=="operator"||e=="spread"?r(n?A:S):e=="["?r(p("]"),jt,c,f):e=="{"?ue(he,"}",null,f):e=="quasi"?d(ke,f):e=="new"?r(ct(n)):r()}function X(e){return e.match(/[;\}\)\],]/)?d():d(S)}function P(e,t){return e==","?r(X):Z(e,t,!1)}function Z(e,t,n){var o=n==!1?P:Z,f=n==!1?S:A;if(e=="=>")return r(W,n?Me:Be,B);if(e=="operator")return/\+\+|--/.test(t)||m&&t=="!"?r(o):m&&t=="<"&&i.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?r(p(">"),I(x,">"),c,o):t=="?"?r(S,w(":"),f):r(f);if(e=="quasi")return d(ke,o);if(e!=";"){if(e=="(")return ue(A,")","call",o);if(e==".")return r(pt,o);if(e=="[")return r(p("]"),X,w("]"),c,o);if(m&&t=="as")return i.marked="keyword",r(x,o);if(e=="regexp")return i.state.lastType=i.marked="operator",i.stream.backUp(i.stream.pos-i.stream.start-1),r(f)}}function ke(e,t){return e!="quasi"?d():t.slice(t.length-2)!="${"?r(ke):r(X,st)}function st(e){if(e=="}")return i.marked="string-2",i.state.tokenize=oe,r(ke)}function Be(e){return xe(i.stream,i.state),d(e=="{"?C:S)}function Me(e){return xe(i.stream,i.state),d(e=="{"?C:A)}function ct(e){return function(t){return t=="."?r(e?dt:ft):t=="variable"&&m?r(gt,e?Z:P):d(e?A:S)}}function ft(e,t){if(t=="target")return i.marked="keyword",r(P)}function dt(e,t){if(t=="target")return i.marked="keyword",r(Z)}function mt(e){return e==":"?r(c,C):d(P,w(";"),c)}function pt(e){if(e=="variable")return i.marked="property",r()}function he(e,t){if(e=="async")return i.marked="property",r(he);if(e=="variable"||i.style=="keyword"){if(i.marked="property",t=="get"||t=="set")return r(yt);var n;return m&&i.state.fatArrowAt==i.stream.start&&(n=i.stream.match(/^\s*:\s*/,!1))&&(i.state.fatArrowAt=i.stream.pos+n[0].length),r(J)}else{if(e=="number"||e=="string")return i.marked=v?"property":i.style+" property",r(J);if(e=="jsonld-keyword")return r(J);if(m&&pe(t))return i.marked="keyword",r(he);if(e=="[")return r(S,ee,w("]"),J);if(e=="spread")return r(A,J);if(t=="*")return i.marked="keyword",r(he);if(e==":")return d(J)}}function yt(e){return e!="variable"?d(J):(i.marked="property",r($))}function J(e){if(e==":")return r(A);if(e=="(")return d($)}function I(e,t,n){function o(f,g){if(n?n.indexOf(f)>-1:f==","){var E=i.state.lexical;return E.info=="call"&&(E.pos=(E.pos||0)+1),r(function(_,R){return _==t||R==t?d():d(e)},o)}return f==t||g==t?r():n&&n.indexOf(";")>-1?d(e):r(w(t))}return function(f,g){return f==t||g==t?r():d(e,o)}}function ue(e,t,n){for(var o=3;o<arguments.length;o++)i.cc.push(arguments[o]);return r(p(t,n),I(e,t),c)}function be(e){return e=="}"?r():d(C,be)}function ee(e,t){if(m){if(e==":")return r(x);if(t=="?")return r(ee)}}function kt(e,t){if(m&&(e==":"||t=="in"))return r(x)}function Re(e){if(m&&e==":")return i.stream.match(/^\s*\w+\s+is\b/,!1)?r(S,ht,x):r(x)}function ht(e,t){if(t=="is")return i.marked="keyword",r()}function x(e,t){if(t=="keyof"||t=="typeof"||t=="infer"||t=="readonly")return i.marked="keyword",r(t=="typeof"?A:x);if(e=="variable"||t=="void")return i.marked="type",r(H);if(t=="|"||t=="&")return r(x);if(e=="string"||e=="number"||e=="atom")return r(H);if(e=="[")return r(p("]"),I(x,"]",","),c,H);if(e=="{")return r(p("}"),Se,c,H);if(e=="(")return r(I(Ce,")"),bt,H);if(e=="<")return r(I(x,">"),x);if(e=="quasi")return d(Te,H)}function bt(e){if(e=="=>")return r(x)}function Se(e){return e.match(/[\}\)\]]/)?r():e==","||e==";"?r(Se):d(se,Se)}function se(e,t){if(e=="variable"||i.style=="keyword")return i.marked="property",r(se);if(t=="?"||e=="number"||e=="string")return r(se);if(e==":")return r(x);if(e=="[")return r(w("variable"),kt,w("]"),se);if(e=="(")return d(re,se);if(!e.match(/[;\}\)\],]/))return r()}function Te(e,t){return e!="quasi"?d():t.slice(t.length-2)!="${"?r(Te):r(x,wt)}function wt(e){if(e=="}")return i.marked="string-2",i.state.tokenize=oe,r(Te)}function Ce(e,t){return e=="variable"&&i.stream.match(/^\s*[?:]/,!1)||t=="?"?r(Ce):e==":"?r(x):e=="spread"?r(Ce):d(x)}function H(e,t){if(t=="<")return r(p(">"),I(x,">"),c,H);if(t=="|"||e=="."||t=="&")return r(x);if(e=="[")return r(x,w("]"),H);if(t=="extends"||t=="implements")return i.marked="keyword",r(x);if(t=="?")return r(x,w(":"),x)}function gt(e,t){if(t=="<")return r(p(">"),I(x,">"),c,H)}function we(){return d(x,vt)}function vt(e,t){if(t=="=")return r(x)}function Ie(e,t){return t=="enum"?(i.marked="keyword",r(Pe)):d(M,ee,U,Et)}function M(e,t){if(m&&pe(t))return i.marked="keyword",r(M);if(e=="variable")return Y(t),r();if(e=="spread")return r(M);if(e=="[")return ue(xt,"]");if(e=="{")return ue(Oe,"}")}function Oe(e,t){return e=="variable"&&!i.stream.match(/^\s*:/,!1)?(Y(t),r(U)):(e=="variable"&&(i.marked="property"),e=="spread"?r(M):e=="}"?d():e=="["?r(S,w("]"),w(":"),Oe):r(w(":"),M,U))}function xt(){return d(M,U)}function U(e,t){if(t=="=")return r(A)}function Et(e){if(e==",")return r(Ie)}function He(e,t){if(e=="keyword b"&&t=="else")return r(p("form","else"),C,c)}function ze(e,t){if(t=="await")return r(ze);if(e=="(")return r(p(")"),Nt,c)}function Nt(e){return e=="var"?r(Ie,te):e=="variable"?r(te):d(te)}function te(e,t){return e==")"?r():e==";"?r(te):t=="in"||t=="of"?(i.marked="keyword",r(S,te)):d(S,te)}function $(e,t){if(t=="*")return i.marked="keyword",r($);if(e=="variable")return Y(t),r($);if(e=="(")return r(W,p(")"),I(Q,")"),c,Re,C,B);if(m&&t=="<")return r(p(">"),I(we,">"),c,$)}function re(e,t){if(t=="*")return i.marked="keyword",r(re);if(e=="variable")return Y(t),r(re);if(e=="(")return r(W,p(")"),I(Q,")"),c,Re,B);if(m&&t=="<")return r(p(">"),I(we,">"),c,re)}function Ue(e,t){if(e=="keyword"||e=="variable")return i.marked="type",r(Ue);if(t=="<")return r(p(">"),I(we,">"),c)}function Q(e,t){return t=="@"&&r(S,Q),e=="spread"?r(Q):m&&pe(t)?(i.marked="keyword",r(Q)):m&&e=="this"?r(ee,U):d(M,ee,U)}function St(e,t){return e=="variable"?$e(e,t):ge(e,t)}function $e(e,t){if(e=="variable")return Y(t),r(ge)}function ge(e,t){if(t=="<")return r(p(">"),I(we,">"),c,ge);if(t=="extends"||t=="implements"||m&&e==",")return t=="implements"&&(i.marked="keyword"),r(m?x:S,ge);if(e=="{")return r(p("}"),z,c)}function z(e,t){if(e=="async"||e=="variable"&&(t=="static"||t=="get"||t=="set"||m&&pe(t))&&i.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return i.marked="keyword",r(z);if(e=="variable"||i.style=="keyword")return i.marked="property",r(ce,z);if(e=="number"||e=="string")return r(ce,z);if(e=="[")return r(S,ee,w("]"),ce,z);if(t=="*")return i.marked="keyword",r(z);if(m&&e=="(")return d(re,z);if(e==";"||e==",")return r(z);if(e=="}")return r();if(t=="@")return r(S,z)}function ce(e,t){if(t=="!"||t=="?")return r(ce);if(e==":")return r(x,U);if(t=="=")return r(A);var n=i.state.lexical.prev,o=n&&n.info=="interface";return d(o?re:$)}function Tt(e,t){return t=="*"?(i.marked="keyword",r(je,w(";"))):t=="default"?(i.marked="keyword",r(S,w(";"))):e=="{"?r(I(Fe,"}"),je,w(";")):d(C)}function Fe(e,t){if(t=="as")return i.marked="keyword",r(w("variable"));if(e=="variable")return d(A,Fe)}function Ct(e){return e=="string"?r():e=="("?d(S):e=="."?d(P):d(ve,We,je)}function ve(e,t){return e=="{"?ue(ve,"}"):(e=="variable"&&Y(t),t=="*"&&(i.marked="keyword"),r(It))}function We(e){if(e==",")return r(ve,We)}function It(e,t){if(t=="as")return i.marked="keyword",r(ve)}function je(e,t){if(t=="from")return i.marked="keyword",r(S)}function jt(e){return e=="]"?r():d(I(A,"]"))}function Pe(){return d(p("form"),M,w("{"),p("}"),I(Lt,"}"),c,c)}function Lt(){return d(M,U)}function Dt(e,t){return e.lastType=="operator"||e.lastType==","||fe.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}function Je(e,t,n){return t.tokenize==F&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||t.lastType=="quasi"&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return{startState:function(e){var t={tokenize:F,lastType:"sof",cc:[],lexical:new _e((e||0)-k,0,"block",!1),localVars:s.localVars,context:s.localVars&&new ae(null,null,!1),indented:e||0};return s.globalVars&&typeof s.globalVars=="object"&&(t.globalVars=s.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),xe(e,t)),t.tokenize!=me&&e.eatSpace())return null;var n=t.tokenize(e,t);return ie=="comment"?n:(t.lastType=ie=="operator"&&(de=="++"||de=="--")?"incdec":ie,Ae(t,n,ie,de,e))},indent:function(e,t){if(e.tokenize==me||e.tokenize==oe)return l.Pass;if(e.tokenize!=F)return 0;var n=t&&t.charAt(0),o=e.lexical,f;if(!/^\s*else\b/.test(t))for(var g=e.cc.length-1;g>=0;--g){var E=e.cc[g];if(E==c)o=o.prev;else if(E!=He&&E!=B)break}for(;(o.type=="stat"||o.type=="form")&&(n=="}"||(f=e.cc[e.cc.length-1])&&(f==P||f==Z)&&!/^[,\.=+\-*:?[\(]/.test(t));)o=o.prev;b&&o.type==")"&&o.prev.type=="stat"&&(o=o.prev);var _=o.type,R=n==_;return _=="vardef"?o.indented+(e.lastType=="operator"||e.lastType==","?o.info.length+1:0):_=="form"&&n=="{"?o.indented:_=="form"?o.indented+k:_=="stat"?o.indented+(Dt(e,t)?b||k:0):o.info=="switch"&&!R&&s.doubleIndentSwitch!=!1?o.indented+(/^(?:case|default)\b/.test(t)?k:2*k):o.align?o.column+(R?0:1):o.indented+(R?0:k)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:h?null:"/*",blockCommentEnd:h?null:"*/",blockCommentContinue:h?null:" * ",lineComment:h?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:h?"json":"javascript",jsonldMode:v,jsonMode:h,expressionAllowed:Je,skipExpression:function(e){Ae(e,"atom","atom","true",new l.StringStream("",2,null))}}}),l.registerHelper("wordChars","javascript",/[\w$]/),l.defineMIME("text/javascript","javascript"),l.defineMIME("text/ecmascript","javascript"),l.defineMIME("application/javascript","javascript"),l.defineMIME("application/x-javascript","javascript"),l.defineMIME("application/ecmascript","javascript"),l.defineMIME("application/json",{name:"javascript",json:!0}),l.defineMIME("application/x-json",{name:"javascript",json:!0}),l.defineMIME("application/manifest+json",{name:"javascript",json:!0}),l.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),l.defineMIME("text/typescript",{name:"javascript",typescript:!0}),l.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();function Ot(a,u,l,y,s){const k=document.getElementById(a),b=new Xe,v=Mt(k.querySelector("div.computelite-text-editor"),{lineNumbers:!0,lineWrapping:!0,mode:"javascript",autoRefresh:!0,autofocus:!0,tabSize:4,indentUnit:4,extraKeys:{"Ctrl-Enter":async h=>Qe(v,k,b,u,l,s)}});return v.addKeyMap({Backspace:function(h){Ht(h)}}),setTimeout(()=>{v.refresh(),y&&v.setValue(y)},10),k.querySelector("button.cell-controls-button").onclick=function(){Qe(v,k,b,u,l)},v}async function Qe(a,u,l,y,s,k){a.getInputField().blur();const b=a.getValue();u.querySelector(".cell-bottom").innerHTML="",u.querySelector(".sidebar-inner")&&(u.querySelector(".sidebar-inner").innerHTML=""),Ke(u,!0),await D("updateData",y,"UPDATE S_NotebookContent SET CellContent = ? WHERE CellId = ? AND CellType = ? AND NotebookId = ?",[b,s,"javascript",k]);const v=N("div");u.querySelector(".cell-bottom").appendChild(v),window.thisDiv=v,window.applyCss=function(m){et(m)};const h=console.log;console.log=(...m)=>{Ye(u,[m.join(" ")]),h.apply(console,m)};const L=await l.run(b);console.log=h,Ke(u,!1),zt(u,L,v)}function Ke(a,u){const l=a.querySelector("span.fa-regular");l&&(l.classList.toggle("fa-play-circle",!u),l.classList.toggle("fa-hourglass",u))}function Ht(a){const u=a.getCursor(),l=a.getLine(u.line),y=a.getOption("indentUnit");/^\s*$/.test(l.slice(0,u.ch))&&u.ch>0?a.setCursor({line:u.line,ch:Math.max(0,u.ch-y)}):a.execCommand("delCharBefore")}function zt(a,u,l){const{value:y,error:s}=u;if(!Ze(y,l)&&y!==void 0&&Ye(a,[y],s?"error":void 0),s)throw y}function Ze(a,u){return a instanceof HTMLElement?(u.appendChild(a),!0):!1}async function Ut(a,u,l){a.innerHTML="",a.style="width:100% !important",a.parentNode.style="width:100% !important",a.classList.remove("cell-position");const s=await D("fetchData",u,"SELECT CellId,CellContent FROM S_NotebookContent WHERE Name = ? AND CellType = ?",[l,"javascript"]);for(let k of s){const b=N("computelite-cell");b.setAttribute("tabindex","0");const v=N("div","cell-bottom"),h=N("div");window.thisDiv=h,window.applyStyle=async function(L){et(L)},v.appendChild(h),b.appendChild(v),a.appendChild(b),await $t(k[1],h)}}function et(a,u){let l=document.createElement("style");l.innerHTML=a,document.head.appendChild(l)}async function $t(a,u){const y=await new Xe().run(a);if(!Ze(y.value,u)&&y.error)throw y.value}const Ft=new URLSearchParams(window.location.search);let j=Ft.get("modelName"),ne=!1;const q=document.getElementById("cellContainer");let Ge={};window.onload=async function(){Ge=await At();try{window.loadCDNScripts=async function(l){const y=(s,k)=>new Promise((b,v)=>{if(k&&window[k]){b(window[k]);return}const h=document.createElement("script");h.src=s,h.async=!0,h.onload=()=>b(window[k]||!0),h.onerror=()=>v(new Error(`Failed to load script: ${s}`)),document.head.appendChild(h)});return Promise.all(l.map(s=>y(s.url,s.globalVar)))},window.loadCDNStylesheets=async function(l){return Promise.all(l.map(({url:y})=>new Promise((s,k)=>{const b=document.createElement("link");b.rel="stylesheet",b.href=y,b.onload=()=>s(y),b.onerror=()=>k(`Failed to load CSS: ${y}`),document.head.appendChild(b)})))};let a=await D("init");if(!a||a.msg!="Success"){O("Alert!","Some error occured while initializing sqlite.");return}if(!j&&!((await qt("home","getUserModels")).some(s=>s[0]==="Default_DB")?"Default_DB":(await Vt(Ge))[0]||null)){O("Alert!","Model Name not found in the URL.");return}window.getData=async(l,y=[])=>D("getData",j,l,y),window.executeQuery=async(l,y=[])=>D("updateData",j,l,y),await rt();let u=document.getElementById("jsListDiv").querySelector("li.selectedValue");await K(u.innerText)}catch(a){O("",`Error during initialization:, ${a}`),console.error("Error during initialization:",a);return}};async function K(a){document.getElementById("loadingOverlay").classList.remove("hidden");try{(await D("fetchData",j,"SELECT CellId,CellContent,NotebookId FROM S_NotebookContent WHERE Name = ? AND CellType = ?",[a,"javascript"])).forEach(([y,s,k])=>tt(y,k,s))}catch(u){console.error("Error populating cells:",u)}finally{document.getElementById("loadingOverlay").classList.add("hidden")}}function tt(a,u,l=""){const y=Rt(),s=N("computelite-cell","cell-grid cell-container celltype-python",y);s.setAttribute("tabindex","0");const k=N("div","cell-controls cell-controls-left cell-controls-left-top"),b=N("button","btn cell-controls-button py-1");b.title="Run Cell";const v=N("span","fa-regular fa-play-circle");v.style.fontSize="16px",b.appendChild(v),k.appendChild(b);const h=N("div","cell-top flush");let L=N("div");L.style="position: relative;width: 100%;height: 0;";const m=N("div","computelite-text-editor-controls",null,N("div"));m.firstChild.appendChild(N("button","btn btn-small transparent p-1 px-1 me-1",null,N("span","fa-solid fa-trash-alt"))),m.querySelector("button").title="Delete Cell",m.querySelector("span").style="color: #00000066;",m.querySelector("button").onclick=async function(){await D("deleteData",j,"DELETE FROM S_NotebookContent WHERE CellId = ? AND CellType = ? AND NotebookId = ?",[a,"javascript",u])&&s.remove()};const V=N("computelite-text-editor"),G=N("div","computelite-text-editor");L.appendChild(m),V.appendChild(L),V.appendChild(G),h.appendChild(V),s.appendChild(k),s.appendChild(h);const fe=N("div","cell-bottom");s.appendChild(fe),q.appendChild(s),Ot(y,j,a,l,u)}document.getElementById("addCell").onclick=async function(){let a=document.getElementById("jsListDiv").querySelector("li.selectedValue"),u=a.getAttribute("id");if(!j){O("Alert!","Model Name not found in the URL.");return}try{let l=await D("insertData",j,"INSERT INTO S_NotebookContent (CellContent, Name, NotebookId, CellType) VALUES (?, ?, ?, ?)",["",a.innerText,u,"javascript"]);tt(l,u)}catch(l){console.error("Error adding cell:",l)}};document.getElementById("hideCode").onclick=async function(){try{let a=document.getElementById("jsListDiv").querySelector("li.selectedValue");ne?(this.innerText="Hide Code",q.innerHTML="",q.style="width:80% !important",q.parentNode.style="width:80% !important",q.classList.contains("cell-position")||q.classList.add("cell-position"),await K(a.innerText)):(await Ut(q,j,a.innerText),this.innerText="Show Code"),ne=!ne}catch(a){console.error("Error toggling cells:",a)}};async function rt(){try{let a=document.getElementById("jsListDiv"),l=await D("fetchData",j,"SELECT Name, NotebookId FROM S_Notebooks WHERE Status = 'Active' AND Type = 'Javascript'"),y=new Set;if(l.length>0){for(let s of l)if(s[0]&&!y.has(s[0])){y.add(s[0]);let k=N("li","py-0 ps-1",s[1],null),b=N("label","checkBox-label",null,N("span","fas fa-file-alt"),null);b.appendChild(document.createTextNode(s[0])),k.appendChild(b),a.appendChild(k),k.onclick=async function(v){for(let h of document.getElementById("jsListDiv").querySelectorAll("li.selectedValue"))h.classList.remove("selectedValue");this.classList.add("selectedValue"),document.getElementById("hideCode").innerText="Hide Code",ne=!1,q.innerHTML="",await K(this.innerText)}}a.firstElementChild.classList.add("selectedValue")}else{let k=await D("insertData",j,"INSERT INTO S_Notebooks (Name,Type,Status) VALUES (?, ?, ?) RETURNING NotebookId",["Default","Javascript","Active"]);await D("insertData",j,"INSERT INTO S_NotebookContent (Name,CellContent,CellType,NotebookId) VALUES (?, ?, ?, ?)",["Default","","javascript",k]);let v=N("li","py-0 ps-1",k,null),h=N("label","checkBox-label",null,N("span","fas fa-file-alt"),null);h.appendChild(document.createTextNode("Default")),v.appendChild(h),a.appendChild(v),v.classList.add("selectedValue"),q.innerHTML="",v.onclick=async function(L){for(let m of a.querySelectorAll("li.selectedValue"))m.classList.remove("selectedValue");this.classList.add("selectedValue"),document.getElementById("hideCode").innerText="Hide Code",ne=!1,q.innerHTML="",await K(this.innerText)}}}catch(a){O("Alert!",`Error during execution:, ${a}`),console.error("Error during execution:",a);return}}document.getElementById("addNotebook").onclick=async function(){document.getElementById("inputDiv").classList.remove("d-none"),document.getElementById("notebookName").focus()};document.getElementById("notebookName").onkeydown=async function(a){try{if(a.key==="Enter"){a.preventDefault();const u=a.target.value.trim();if(a.target.value="",u===""){O("Alert!","Please enter Notebook Name.");return}if(!/^[^\s]+$/.test(u)){O("Alert!","Please enter a valid Notebook Name.");return}if((await D("fetchData",j,"SELECT name FROM S_Notebooks WHERE name = ? AND Type = 'Javascript'",[u])).length>0){O("Alert!","Notebook Name Already Exists");return}let b=await D("insertData",j,"INSERT INTO S_Notebooks (Name,Type,Status) VALUES (?, ?, ?) RETURNING NotebookId",[u,"Javascript","Active"]);await D("insertData",j,"INSERT INTO S_NotebookContent (CellContent, Name, NotebookId, CellType) VALUES (?, ?, ?, ?)",["",u,b,"javascript"]),document.getElementById("inputDiv").classList.add("d-none");let h=document.getElementById("jsListDiv"),L=N("li","py-0 ps-1",b,null),m=N("label","checkBox-label",null,N("span","fas fa-file-alt"),null);m.appendChild(document.createTextNode(u)),L.appendChild(m),h.appendChild(L);for(let V of h.querySelectorAll("li.selectedValue"))V.classList.remove("selectedValue");L.classList.add("selectedValue"),q.innerHTML="",await K(u),L.onclick=async function(V){for(let G of h.querySelectorAll("li.selectedValue"))G.classList.remove("selectedValue");this.classList.add("selectedValue"),document.getElementById("hideCode").innerText="Hide Code",ne=!1,q.innerHTML="",await K(this.innerText)}}}catch(u){console.error("Error adding notebook:",u)}};document.getElementById("deleteNotebook").onclick=function(){let a=document.getElementById("jsListDiv").querySelector("li.selectedValue");a?O("",`Are You Sure Want to Delete ${a.innerText}`,Wt.bind(null,a),1):O("Alert!","No Notebook Selected to delete")};async function Wt(a){let u=a.getAttribute("id");await D("deleteData",j,"DELETE FROM S_Notebooks WHERE NotebookId = ? ",[u]);const s=await D("deleteData",j,"DELETE FROM S_NotebookContent WHERE NotebookId = ? AND CellType = 'javascript'",[u]);for(let b of document.querySelectorAll("computelite-cell"))s&&b.remove();document.getElementById("jsListDiv").innerHTML="",await rt();let k=document.getElementById("jsListDiv").querySelector("li.selectedValue");await K(k.innerText)}document.getElementById("toggleSidebar").onclick=function(){document.getElementById("sidebarMenu").classList.toggle("contracted"),q.classList.toggle("cell-position"),document.getElementById("inputDiv").classList.add("d-none")};
