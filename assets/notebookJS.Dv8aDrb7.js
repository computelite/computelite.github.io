import"./pixel.CyAMObzi.js";/* empty css              */import{e as D,b as S,G as Xe,J as Ze,v as _t,c as O,w as qt,x as Bt}from"./scc.C0KxU-5h.js";import{r as Vt,C as Mt}from"./codemirror.i0qkzkfX.js";import{n as Rt}from"./index.browser.B1VcazSC.js";import"https://webr.r-wasm.org/latest/webr.mjs";(function(a,l){(function(u){u(Vt())})(function(u){u.defineMode("javascript",function(p,s){var h=p.indentUnit,y=s.statementIndent,v=s.jsonld,b=s.json||v,C=s.trackScope!==!1,c=s.typescript,L=s.wordCharacters||/[\w$\xa1-\uffff]/,P=function(){function e(_){return{type:_,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),o=e("keyword c"),d=e("keyword d"),g=e("operator"),x={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:d,break:d,continue:d,new:e("new"),delete:o,void:o,throw:o,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:g,typeof:g,instanceof:g,true:x,false:x,null:x,undefined:x,NaN:x,Infinity:x,this:e("this"),class:e("class"),super:e("atom"),yield:o,export:e("export"),import:e("import"),extends:o,await:o}}(),H=/[+\-*&%=<>!?|~^@]/,Z=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function ae(e){for(var t=!1,n,o=!1;(n=e.next())!=null;){if(!t){if(n=="/"&&!o)return;n=="["?o=!0:o&&n=="]"&&(o=!1)}t=!t&&n=="\\"}}var le,pe;function T(e,t,n){return le=e,pe=n,t}function J(e,t){var n=e.next();if(n=='"'||n=="'")return t.tokenize=nt(n),t.tokenize(e,t);if(n=="."&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return T("number","number");if(n=="."&&e.match(".."))return T("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return T(n);if(n=="="&&e.eat(">"))return T("=>","operator");if(n=="0"&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return T("number","number");if(/\d/.test(n))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),T("number","number");if(n=="/")return e.eat("*")?(t.tokenize=ye,ye(e,t)):e.eat("/")?(e.skipToEnd(),T("comment","comment")):Ke(e,t,1)?(ae(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),T("regexp","string-2")):(e.eat("="),T("operator","operator",e.current()));if(n=="`")return t.tokenize=ue,ue(e,t);if(n=="#"&&e.peek()=="!")return e.skipToEnd(),T("meta","meta");if(n=="#"&&e.eatWhile(L))return T("variable","property");if(n=="<"&&e.match("!--")||n=="-"&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),T("comment","comment");if(H.test(n))return(n!=">"||!t.lexical||t.lexical.type!=">")&&(e.eat("=")?(n=="!"||n=="=")&&e.eat("="):/[<>*+\-|&?]/.test(n)&&(e.eat(n),n==">"&&e.eat(n))),n=="?"&&e.eat(".")?T("."):T("operator","operator",e.current());if(L.test(n)){e.eatWhile(L);var o=e.current();if(t.lastType!="."){if(P.propertyIsEnumerable(o)){var d=P[o];return T(d.type,d.style,o)}if(o=="async"&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return T("async","keyword",o)}return T("variable","variable",o)}}function nt(e){return function(t,n){var o=!1,d;if(v&&t.peek()=="@"&&t.match(Z))return n.tokenize=J,T("jsonld-keyword","meta");for(;(d=t.next())!=null&&!(d==e&&!o);)o=!o&&d=="\\";return o||(n.tokenize=J),T("string","string")}}function ye(e,t){for(var n=!1,o;o=e.next();){if(o=="/"&&n){t.tokenize=J;break}n=o=="*"}return T("comment","comment")}function ue(e,t){for(var n=!1,o;(o=e.next())!=null;){if(!n&&(o=="`"||o=="$"&&e.eat("{"))){t.tokenize=J;break}n=!n&&o=="\\"}return T("quasi","string-2",e.current())}var it="([{}])";function Ce(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(c){var o=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));o&&(n=o.index)}for(var d=0,g=!1,x=n-1;x>=0;--x){var _=e.string.charAt(x),R=it.indexOf(_);if(R>=0&&R<3){if(!d){++x;break}if(--d==0){_=="("&&(g=!0);break}}else if(R>=3&&R<6)++d;else if(L.test(_))g=!0;else if(/["'\/`]/.test(_))for(;;--x){if(x==0)return;var At=e.string.charAt(x-1);if(At==_&&e.string.charAt(x-2)!="\\"){x--;break}}else if(g&&!d){++x;break}}g&&!d&&(t.fatArrowAt=x)}}var ot={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function qe(e,t,n,o,d,g){this.indented=e,this.column=t,this.type=n,this.prev=d,this.info=g,o!=null&&(this.align=o)}function at(e,t){if(!C)return!1;for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var o=e.context;o;o=o.prev)for(var n=o.vars;n;n=n.next)if(n.name==t)return!0}function Be(e,t,n,o,d){var g=e.cc;for(i.state=e,i.stream=d,i.marked=null,i.cc=g,i.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var x=g.length?g.pop():b?N:I;if(x(n,o)){for(;g.length&&g[g.length-1].lex;)g.pop()();return i.marked?i.marked:n=="variable"&&at(e,o)?"variable-2":t}}}var i={state:null,column:null,marked:null,cc:null};function m(){for(var e=arguments.length-1;e>=0;e--)i.cc.push(arguments[e])}function r(){return m.apply(null,arguments),!0}function Se(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function ee(e){var t=i.state;if(i.marked="def",!!C){if(t.context){if(t.lexical.info=="var"&&t.context&&t.context.block){var n=Ve(e,t.context);if(n!=null){t.context=n;return}}else if(!Se(e,t.localVars)){t.localVars=new ce(e,t.localVars);return}}s.globalVars&&!Se(e,t.globalVars)&&(t.globalVars=new ce(e,t.globalVars))}}function Ve(e,t){if(t)if(t.block){var n=Ve(e,t.prev);return n?n==t.prev?t:new se(n,t.vars,!0):null}else return Se(e,t.vars)?t:new se(t.prev,new ce(e,t.vars),!1);else return null}function ke(e){return e=="public"||e=="private"||e=="protected"||e=="abstract"||e=="readonly"}function se(e,t,n){this.prev=e,this.vars=t,this.block=n}function ce(e,t){this.name=e,this.next=t}var lt=new ce("this",new ce("arguments",null));function Q(){i.state.context=new se(i.state.context,i.state.localVars,!1),i.state.localVars=lt}function he(){i.state.context=new se(i.state.context,i.state.localVars,!0),i.state.localVars=null}Q.lex=he.lex=!0;function V(){i.state.localVars=i.state.context.vars,i.state.context=i.state.context.prev}V.lex=!0;function k(e,t){var n=function(){var o=i.state,d=o.indented;if(o.lexical.type=="stat")d=o.lexical.indented;else for(var g=o.lexical;g&&g.type==")"&&g.align;g=g.prev)d=g.indented;o.lexical=new qe(d,i.stream.column(),e,null,o.lexical,t)};return n.lex=!0,n}function f(){var e=i.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}f.lex=!0;function w(e){function t(n){return n==e?r():e==";"||n=="}"||n==")"||n=="]"?m():r(t)}return t}function I(e,t){return e=="var"?r(k("vardef",t),je,w(";"),f):e=="keyword a"?r(k("form"),Ne,I,f):e=="keyword b"?r(k("form"),I,f):e=="keyword d"?i.stream.match(/^\s*$/,!1)?r():r(k("stat"),te,w(";"),f):e=="debugger"?r(w(";")):e=="{"?r(k("}"),he,ge,f,V):e==";"?r():e=="if"?(i.state.lexical.info=="else"&&i.state.cc[i.state.cc.length-1]==f&&i.state.cc.pop()(),r(k("form"),Ne,I,f,Ue)):e=="function"?r(W):e=="for"?r(k("form"),he,$e,I,V,f):e=="class"||c&&t=="interface"?(i.marked="keyword",r(k("form",e=="class"?e:t),We,f)):e=="variable"?c&&t=="declare"?(i.marked="keyword",r(I)):c&&(t=="module"||t=="enum"||t=="type")&&i.stream.match(/^\s*\w/,!1)?(i.marked="keyword",t=="enum"?r(Qe):t=="type"?r(Fe,w("operator"),E,w(";")):r(k("form"),M,w("{"),k("}"),ge,f,f)):c&&t=="namespace"?(i.marked="keyword",r(k("form"),N,I,f)):c&&t=="abstract"?(i.marked="keyword",r(I)):r(k("stat"),mt):e=="switch"?r(k("form"),Ne,w("{"),k("}","switch"),he,ge,f,f,V):e=="case"?r(N,w(":")):e=="default"?r(w(":")):e=="catch"?r(k("form"),Q,ut,I,f,V):e=="export"?r(k("stat"),Nt,f):e=="import"?r(k("stat"),Tt,f):e=="async"?r(I):t=="@"?r(N,I):m(k("stat"),N,w(";"),f)}function ut(e){if(e=="(")return r(Y,w(")"))}function N(e,t){return Me(e,t,!1)}function q(e,t){return Me(e,t,!0)}function Ne(e){return e!="("?m():r(k(")"),te,w(")"),f)}function Me(e,t,n){if(i.state.fatArrowAt==i.stream.start){var o=n?Oe:Re;if(e=="(")return r(Q,k(")"),j(Y,")"),f,w("=>"),o,V);if(e=="variable")return m(Q,M,w("=>"),o,V)}var d=n?re:K;return ot.hasOwnProperty(e)?r(d):e=="function"?r(W,d):e=="class"||c&&t=="interface"?(i.marked="keyword",r(k("form"),St,f)):e=="keyword c"||e=="async"?r(n?q:N):e=="("?r(k(")"),te,w(")"),f,d):e=="operator"||e=="spread"?r(n?q:N):e=="["?r(k("]"),Lt,f,d):e=="{"?fe(we,"}",null,d):e=="quasi"?m(be,d):e=="new"?r(ct(n)):r()}function te(e){return e.match(/[;\}\)\],]/)?m():m(N)}function K(e,t){return e==","?r(te):re(e,t,!1)}function re(e,t,n){var o=n==!1?K:re,d=n==!1?N:q;if(e=="=>")return r(Q,n?Oe:Re,V);if(e=="operator")return/\+\+|--/.test(t)||c&&t=="!"?r(o):c&&t=="<"&&i.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?r(k(">"),j(E,">"),f,o):t=="?"?r(N,w(":"),d):r(d);if(e=="quasi")return m(be,o);if(e!=";"){if(e=="(")return fe(q,")","call",o);if(e==".")return r(pt,o);if(e=="[")return r(k("]"),te,w("]"),f,o);if(c&&t=="as")return i.marked="keyword",r(E,o);if(e=="regexp")return i.state.lastType=i.marked="operator",i.stream.backUp(i.stream.pos-i.stream.start-1),r(d)}}function be(e,t){return e!="quasi"?m():t.slice(t.length-2)!="${"?r(be):r(te,st)}function st(e){if(e=="}")return i.marked="string-2",i.state.tokenize=ue,r(be)}function Re(e){return Ce(i.stream,i.state),m(e=="{"?I:N)}function Oe(e){return Ce(i.stream,i.state),m(e=="{"?I:q)}function ct(e){return function(t){return t=="."?r(e?dt:ft):t=="variable"&&c?r(gt,e?re:K):m(e?q:N)}}function ft(e,t){if(t=="target")return i.marked="keyword",r(K)}function dt(e,t){if(t=="target")return i.marked="keyword",r(re)}function mt(e){return e==":"?r(f,I):m(K,w(";"),f)}function pt(e){if(e=="variable")return i.marked="property",r()}function we(e,t){if(e=="async")return i.marked="property",r(we);if(e=="variable"||i.style=="keyword"){if(i.marked="property",t=="get"||t=="set")return r(yt);var n;return c&&i.state.fatArrowAt==i.stream.start&&(n=i.stream.match(/^\s*:\s*/,!1))&&(i.state.fatArrowAt=i.stream.pos+n[0].length),r(G)}else{if(e=="number"||e=="string")return i.marked=v?"property":i.style+" property",r(G);if(e=="jsonld-keyword")return r(G);if(c&&ke(t))return i.marked="keyword",r(we);if(e=="[")return r(N,ne,w("]"),G);if(e=="spread")return r(q,G);if(t=="*")return i.marked="keyword",r(we);if(e==":")return m(G)}}function yt(e){return e!="variable"?m(G):(i.marked="property",r(W))}function G(e){if(e==":")return r(q);if(e=="(")return m(W)}function j(e,t,n){function o(d,g){if(n?n.indexOf(d)>-1:d==","){var x=i.state.lexical;return x.info=="call"&&(x.pos=(x.pos||0)+1),r(function(_,R){return _==t||R==t?m():m(e)},o)}return d==t||g==t?r():n&&n.indexOf(";")>-1?m(e):r(w(t))}return function(d,g){return d==t||g==t?r():m(e,o)}}function fe(e,t,n){for(var o=3;o<arguments.length;o++)i.cc.push(arguments[o]);return r(k(t,n),j(e,t),f)}function ge(e){return e=="}"?r():m(I,ge)}function ne(e,t){if(c){if(e==":")return r(E);if(t=="?")return r(ne)}}function kt(e,t){if(c&&(e==":"||t=="in"))return r(E)}function He(e){if(c&&e==":")return i.stream.match(/^\s*\w+\s+is\b/,!1)?r(N,ht,E):r(E)}function ht(e,t){if(t=="is")return i.marked="keyword",r()}function E(e,t){if(t=="keyof"||t=="typeof"||t=="infer"||t=="readonly")return i.marked="keyword",r(t=="typeof"?q:E);if(e=="variable"||t=="void")return i.marked="type",r(z);if(t=="|"||t=="&")return r(E);if(e=="string"||e=="number"||e=="atom")return r(z);if(e=="[")return r(k("]"),j(E,"]",","),f,z);if(e=="{")return r(k("}"),Te,f,z);if(e=="(")return r(j(Le,")"),bt,z);if(e=="<")return r(j(E,">"),E);if(e=="quasi")return m(Ie,z)}function bt(e){if(e=="=>")return r(E)}function Te(e){return e.match(/[\}\)\]]/)?r():e==","||e==";"?r(Te):m(de,Te)}function de(e,t){if(e=="variable"||i.style=="keyword")return i.marked="property",r(de);if(t=="?"||e=="number"||e=="string")return r(de);if(e==":")return r(E);if(e=="[")return r(w("variable"),kt,w("]"),de);if(e=="(")return m(oe,de);if(!e.match(/[;\}\)\],]/))return r()}function Ie(e,t){return e!="quasi"?m():t.slice(t.length-2)!="${"?r(Ie):r(E,wt)}function wt(e){if(e=="}")return i.marked="string-2",i.state.tokenize=ue,r(Ie)}function Le(e,t){return e=="variable"&&i.stream.match(/^\s*[?:]/,!1)||t=="?"?r(Le):e==":"?r(E):e=="spread"?r(Le):m(E)}function z(e,t){if(t=="<")return r(k(">"),j(E,">"),f,z);if(t=="|"||e=="."||t=="&")return r(E);if(e=="[")return r(E,w("]"),z);if(t=="extends"||t=="implements")return i.marked="keyword",r(E);if(t=="?")return r(E,w(":"),E)}function gt(e,t){if(t=="<")return r(k(">"),j(E,">"),f,z)}function ve(){return m(E,vt)}function vt(e,t){if(t=="=")return r(E)}function je(e,t){return t=="enum"?(i.marked="keyword",r(Qe)):m(M,ne,F,xt)}function M(e,t){if(c&&ke(t))return i.marked="keyword",r(M);if(e=="variable")return ee(t),r();if(e=="spread")return r(M);if(e=="[")return fe(Et,"]");if(e=="{")return fe(ze,"}")}function ze(e,t){return e=="variable"&&!i.stream.match(/^\s*:/,!1)?(ee(t),r(F)):(e=="variable"&&(i.marked="property"),e=="spread"?r(M):e=="}"?m():e=="["?r(N,w("]"),w(":"),ze):r(w(":"),M,F))}function Et(){return m(M,F)}function F(e,t){if(t=="=")return r(q)}function xt(e){if(e==",")return r(je)}function Ue(e,t){if(e=="keyword b"&&t=="else")return r(k("form","else"),I,f)}function $e(e,t){if(t=="await")return r($e);if(e=="(")return r(k(")"),Ct,f)}function Ct(e){return e=="var"?r(je,ie):e=="variable"?r(ie):m(ie)}function ie(e,t){return e==")"?r():e==";"?r(ie):t=="in"||t=="of"?(i.marked="keyword",r(N,ie)):m(N,ie)}function W(e,t){if(t=="*")return i.marked="keyword",r(W);if(e=="variable")return ee(t),r(W);if(e=="(")return r(Q,k(")"),j(Y,")"),f,He,I,V);if(c&&t=="<")return r(k(">"),j(ve,">"),f,W)}function oe(e,t){if(t=="*")return i.marked="keyword",r(oe);if(e=="variable")return ee(t),r(oe);if(e=="(")return r(Q,k(")"),j(Y,")"),f,He,V);if(c&&t=="<")return r(k(">"),j(ve,">"),f,oe)}function Fe(e,t){if(e=="keyword"||e=="variable")return i.marked="type",r(Fe);if(t=="<")return r(k(">"),j(ve,">"),f)}function Y(e,t){return t=="@"&&r(N,Y),e=="spread"?r(Y):c&&ke(t)?(i.marked="keyword",r(Y)):c&&e=="this"?r(ne,F):m(M,ne,F)}function St(e,t){return e=="variable"?We(e,t):Ee(e,t)}function We(e,t){if(e=="variable")return ee(t),r(Ee)}function Ee(e,t){if(t=="<")return r(k(">"),j(ve,">"),f,Ee);if(t=="extends"||t=="implements"||c&&e==",")return t=="implements"&&(i.marked="keyword"),r(c?E:N,Ee);if(e=="{")return r(k("}"),U,f)}function U(e,t){if(e=="async"||e=="variable"&&(t=="static"||t=="get"||t=="set"||c&&ke(t))&&i.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return i.marked="keyword",r(U);if(e=="variable"||i.style=="keyword")return i.marked="property",r(me,U);if(e=="number"||e=="string")return r(me,U);if(e=="[")return r(N,ne,w("]"),me,U);if(t=="*")return i.marked="keyword",r(U);if(c&&e=="(")return m(oe,U);if(e==";"||e==",")return r(U);if(e=="}")return r();if(t=="@")return r(N,U)}function me(e,t){if(t=="!"||t=="?")return r(me);if(e==":")return r(E,F);if(t=="=")return r(q);var n=i.state.lexical.prev,o=n&&n.info=="interface";return m(o?oe:W)}function Nt(e,t){return t=="*"?(i.marked="keyword",r(De,w(";"))):t=="default"?(i.marked="keyword",r(N,w(";"))):e=="{"?r(j(Pe,"}"),De,w(";")):m(I)}function Pe(e,t){if(t=="as")return i.marked="keyword",r(w("variable"));if(e=="variable")return m(q,Pe)}function Tt(e){return e=="string"?r():e=="("?m(N):e=="."?m(K):m(xe,Je,De)}function xe(e,t){return e=="{"?fe(xe,"}"):(e=="variable"&&ee(t),t=="*"&&(i.marked="keyword"),r(It))}function Je(e){if(e==",")return r(xe,Je)}function It(e,t){if(t=="as")return i.marked="keyword",r(xe)}function De(e,t){if(t=="from")return i.marked="keyword",r(N)}function Lt(e){return e=="]"?r():m(j(q,"]"))}function Qe(){return m(k("form"),M,w("{"),k("}"),j(jt,"}"),f,f)}function jt(){return m(M,F)}function Dt(e,t){return e.lastType=="operator"||e.lastType==","||H.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}function Ke(e,t,n){return t.tokenize==J&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||t.lastType=="quasi"&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return{startState:function(e){var t={tokenize:J,lastType:"sof",cc:[],lexical:new qe((e||0)-h,0,"block",!1),localVars:s.localVars,context:s.localVars&&new se(null,null,!1),indented:e||0};return s.globalVars&&typeof s.globalVars=="object"&&(t.globalVars=s.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),Ce(e,t)),t.tokenize!=ye&&e.eatSpace())return null;var n=t.tokenize(e,t);return le=="comment"?n:(t.lastType=le=="operator"&&(pe=="++"||pe=="--")?"incdec":le,Be(t,n,le,pe,e))},indent:function(e,t){if(e.tokenize==ye||e.tokenize==ue)return u.Pass;if(e.tokenize!=J)return 0;var n=t&&t.charAt(0),o=e.lexical,d;if(!/^\s*else\b/.test(t))for(var g=e.cc.length-1;g>=0;--g){var x=e.cc[g];if(x==f)o=o.prev;else if(x!=Ue&&x!=V)break}for(;(o.type=="stat"||o.type=="form")&&(n=="}"||(d=e.cc[e.cc.length-1])&&(d==K||d==re)&&!/^[,\.=+\-*:?[\(]/.test(t));)o=o.prev;y&&o.type==")"&&o.prev.type=="stat"&&(o=o.prev);var _=o.type,R=n==_;return _=="vardef"?o.indented+(e.lastType=="operator"||e.lastType==","?o.info.length+1:0):_=="form"&&n=="{"?o.indented:_=="form"?o.indented+h:_=="stat"?o.indented+(Dt(e,t)?y||h:0):o.info=="switch"&&!R&&s.doubleIndentSwitch!=!1?o.indented+(/^(?:case|default)\b/.test(t)?h:2*h):o.align?o.column+(R?0:1):o.indented+(R?0:h)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:b?null:"/*",blockCommentEnd:b?null:"*/",blockCommentContinue:b?null:" * ",lineComment:b?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:b?"json":"javascript",jsonldMode:v,jsonMode:b,expressionAllowed:Ke,skipExpression:function(e){Be(e,"atom","atom","true",new u.StringStream("",2,null))}}}),u.registerHelper("wordChars","javascript",/[\w$]/),u.defineMIME("text/javascript","javascript"),u.defineMIME("text/ecmascript","javascript"),u.defineMIME("application/javascript","javascript"),u.defineMIME("application/x-javascript","javascript"),u.defineMIME("application/ecmascript","javascript"),u.defineMIME("application/json",{name:"javascript",json:!0}),u.defineMIME("application/x-json",{name:"javascript",json:!0}),u.defineMIME("application/manifest+json",{name:"javascript",json:!0}),u.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),u.defineMIME("text/typescript",{name:"javascript",typescript:!0}),u.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();function Ot(a,l,u,p,s){const h=document.getElementById(a),y=new Ze,v=Mt(h.querySelector("div.computelite-text-editor"),{lineNumbers:!0,lineWrapping:!0,mode:"javascript",autoRefresh:!0,autofocus:!0,tabSize:4,indentUnit:4,indentWithTabs:!0,smartIndent:!0,matchBrackets:!0,autoCloseBrackets:!0,extraKeys:{"Ctrl-/":"toggleComment","Ctrl-Enter":async b=>Ae(v,h,y,l,u,s),"Shift-Enter":async b=>Ht(v,h,y,l,u,s)}});return v.addKeyMap({Backspace:function(b){zt(b)}}),setTimeout(()=>{v.refresh(),p&&v.setValue(p)},10),h.querySelector("button.cell-controls-button").onclick=function(){Ae(v,h,y,l,u)},v}async function Ht(a,l,u,p,s,h){var b;await Ae(a,l,u,p,s,h);const y=document.querySelectorAll("computelite-cell");if(y[y.length-1]===l){const C=document.getElementById("jsListDiv").querySelector("li.selectedValue"),c=C.getAttribute("id");if(!p){confirmBox("Alert!","Model Name not found in the URL.");return}try{const L=await D("insertData",p,"INSERT INTO S_NotebookContent (CellContent, Name, NotebookId, CellType) VALUES (?, ?, ?, ?)",["",C.innerText,c,"javascript"]),P=_e(L,c);setTimeout(()=>{var ae;const H=document.querySelectorAll(".computelite-cell .CodeMirror"),Z=H[H.length-1];(ae=Z==null?void 0:Z.CodeMirror)==null||ae.focus()},50)}catch(L){console.error("Failed to add new cell:",L)}}else for(let C=0;C<y.length-1;C++)if(y[C]===l){const c=y[C+1].querySelector(".CodeMirror");(b=c==null?void 0:c.CodeMirror)==null||b.focus();break}}async function Ae(a,l,u,p,s,h){a.getInputField().blur();const y=a.getValue();l.querySelector(".cell-bottom").innerHTML="",l.querySelector(".sidebar-inner")&&(l.querySelector(".sidebar-inner").innerHTML=""),Ge(l,!0),await D("updateData",p,"UPDATE S_NotebookContent SET CellContent = ? WHERE CellId = ? AND CellType = ? AND NotebookId = ?",[y,s,"javascript",h]);const v=S("div");l.querySelector(".cell-bottom").appendChild(v),window.thisDiv=v,window.applyCss=function(c){tt(c)};const b=console.log;console.log=(...c)=>{Xe(l,[c.join(" ")]),b.apply(console,c)};const C=await u.run(y);console.log=b,Ge(l,!1),Ut(l,C,v)}function Ge(a,l){const u=a.querySelector("span.fa-regular");u&&(u.classList.toggle("fa-play-circle",!l),u.classList.toggle("fa-hourglass",l))}function zt(a){const l=a.getCursor(),u=a.getLine(l.line),p=a.getOption("indentUnit");/^\s*$/.test(u.slice(0,l.ch))&&l.ch>0?a.setCursor({line:l.line,ch:Math.max(0,l.ch-p)}):a.execCommand("delCharBefore")}function Ut(a,l,u){const{value:p,error:s}=l;if(!et(p,u)&&p!==void 0&&Xe(a,[p],s?"error":void 0),s)throw p}function et(a,l){return a instanceof HTMLElement?(l.appendChild(a),!0):!1}async function $t(a,l,u){a.innerHTML="",a.style="width:100% !important",a.parentNode.style="width:100% !important",a.classList.remove("cell-position");const s=await D("fetchData",l,"SELECT CellId,CellContent FROM S_NotebookContent WHERE Name = ? AND CellType = ?",[u,"javascript"]);for(let h of s){const y=S("computelite-cell");y.setAttribute("tabindex","0");const v=S("div","cell-bottom"),b=S("div");window.thisDiv=b,window.applyStyle=async function(C){tt(C)},v.appendChild(b),y.appendChild(v),a.appendChild(y),await Ft(h[1],b)}}function tt(a,l){let u=document.createElement("style");u.innerHTML=a,document.head.appendChild(u)}async function Ft(a,l){const p=await new Ze().run(a);if(!et(p.value,l)&&p.error)throw p.value}const Wt=new URLSearchParams(window.location.search);let A=Wt.get("modelName"),$=!1;const B=document.getElementById("cellContainer");let Ye={};window.onload=async function(){Ye=await _t();try{window.loadCDNScripts=async function(u){const p=(s,h)=>new Promise((y,v)=>{if(h&&window[h]){y(window[h]);return}const b=document.createElement("script");b.src=s,b.async=!0,b.onload=()=>y(window[h]||!0),b.onerror=()=>v(new Error(`Failed to load script: ${s}`)),document.head.appendChild(b)});return Promise.all(u.map(s=>p(s.url,s.globalVar)))},window.loadCDNStylesheets=async function(u){return Promise.all(u.map(({url:p})=>new Promise((s,h)=>{const y=document.createElement("link");y.rel="stylesheet",y.href=p,y.onload=()=>s(p),y.onerror=()=>h(`Failed to load CSS: ${p}`),document.head.appendChild(y)})))};let a=await D("init");if(!a||a.msg!="Success"){O("Alert!","Some error occured while initializing sqlite.");return}if(!A&&!((await qt("home","getUserModels")).some(s=>s[0]==="Default_DB")?"Default_DB":(await Bt(Ye))[0]||null)){O("Alert!","Model Name not found in the URL.");return}window.getData=async(u,p=[])=>D("getData",A,u,p),window.executeQuery=async(u,p=[])=>D("updateData",A,u,p),await rt();let l=document.getElementById("jsListDiv").querySelector("li.selectedValue");await X(l.innerText)}catch(a){O("",`Error during initialization:, ${a}`),console.error("Error during initialization:",a);return}};async function X(a){document.getElementById("loadingOverlay").classList.remove("hidden");try{(await D("fetchData",A,"SELECT CellId,CellContent,NotebookId FROM S_NotebookContent WHERE Name = ? AND CellType = ?",[a,"javascript"])).forEach(([p,s,h])=>_e(p,h,s))}catch(l){console.error("Error populating cells:",l)}finally{document.getElementById("loadingOverlay").classList.add("hidden")}}function _e(a,l,u=""){const p=Rt(),s=S("computelite-cell","cell-grid cell-container celltype-python",p);s.setAttribute("tabindex","0");const h=S("div","cell-controls cell-controls-left cell-controls-left-top"),y=S("button","btn cell-controls-button py-1");y.title="Run Cell";const v=S("span","fa-regular fa-play-circle");v.style.fontSize="16px",y.appendChild(v),h.appendChild(y);const b=S("div","cell-top flush");let C=S("div");C.style="position: relative;width: 100%;height: 0;";const c=S("div","computelite-text-editor-controls",null,S("div"));c.firstChild.appendChild(S("button","btn btn-small transparent p-1 px-1 me-1",null,S("span","fa-solid fa-trash-alt"))),c.querySelector("button").title="Delete Cell",c.querySelector("span").style="color: #00000066;",c.querySelector("button").onclick=async function(){await D("deleteData",A,"DELETE FROM S_NotebookContent WHERE CellId = ? AND CellType = ? AND NotebookId = ?",[a,"javascript",l])&&s.remove()};const L=S("computelite-text-editor"),P=S("div","computelite-text-editor");C.appendChild(c),L.appendChild(C),L.appendChild(P),b.appendChild(L),s.appendChild(h),s.appendChild(b);const H=S("div","cell-bottom");s.appendChild(H),B.appendChild(s),Ot(p,A,a,u,l)}document.getElementById("addCell").onclick=async function(){let a=document.getElementById("jsListDiv").querySelector("li.selectedValue"),l=a.getAttribute("id");if(!A){O("Alert!","Model Name not found in the URL.");return}try{let u=await D("insertData",A,"INSERT INTO S_NotebookContent (CellContent, Name, NotebookId, CellType) VALUES (?, ?, ?, ?)",["",a.innerText,l,"javascript"]);_e(u,l)}catch(u){console.error("Error adding cell:",u)}};document.getElementById("hideCode").onclick=async function(){try{let a=document.getElementById("jsListDiv").querySelector("li.selectedValue");$?(document.getElementById("addCell").style.display="",this.innerText="Hide Code",B.innerHTML="",B.style="width:80% !important",B.parentNode.style="width:80% !important",document.getElementById("sidebarMenu").classList.contains("contracted")&&B.classList.add("cell-position"),await X(a.innerText)):(await $t(B,A,a.innerText),this.innerText="Show Code",document.getElementById("addCell").style.display="none"),$=!$}catch(a){console.error("Error toggling cells:",a)}};async function rt(){try{let a=document.getElementById("jsListDiv"),u=await D("fetchData",A,"SELECT Name, NotebookId FROM S_Notebooks WHERE Status = 'Active' AND Type = 'Javascript'"),p=new Set;if(u.length>0){for(let s of u)if(s[0]&&!p.has(s[0])){p.add(s[0]);let h=S("li","py-0 ps-1",s[1],null),y=S("label","checkBox-label",null,S("span","fas fa-file-alt"),null);y.appendChild(document.createTextNode(s[0])),h.appendChild(y),a.appendChild(h),h.onclick=async function(v){for(let C of document.getElementById("jsListDiv").querySelectorAll("li.selectedValue"))C.classList.remove("selectedValue");this.classList.add("selectedValue"),B.innerHTML="";let b=document.getElementById("hideCode");if($){$=!1,await b.onclick();return}await X(this.innerText)}}a.firstElementChild.classList.add("selectedValue")}else{let h=await D("insertData",A,"INSERT INTO S_Notebooks (Name,Type,Status) VALUES (?, ?, ?) RETURNING NotebookId",["Default","Javascript","Active"]);await D("insertData",A,"INSERT INTO S_NotebookContent (Name,CellContent,CellType,NotebookId) VALUES (?, ?, ?, ?)",["Default","","javascript",h]);let v=S("li","py-0 ps-1",h,null),b=S("label","checkBox-label",null,S("span","fas fa-file-alt"),null);b.appendChild(document.createTextNode("Default")),v.appendChild(b),a.appendChild(v),v.classList.add("selectedValue"),B.innerHTML="",v.onclick=async function(C){for(let L of a.querySelectorAll("li.selectedValue"))L.classList.remove("selectedValue");this.classList.add("selectedValue"),B.innerHTML="";let c=document.getElementById("hideCode");if($){$=!1,await c.onclick();return}await X(this.innerText)}}}catch(a){O("Alert!",`Error during execution:, ${a}`),console.error("Error during execution:",a);return}}document.getElementById("addNotebook").onclick=async function(){document.getElementById("inputDiv").classList.remove("d-none"),document.getElementById("notebookName").focus()};document.getElementById("notebookName").onkeydown=async function(a){try{if(a.key==="Enter"){a.preventDefault();const l=a.target.value.trim();if(a.target.value="",l===""){O("Alert!","Please enter Notebook Name.");return}if(!/^[^\s]+$/.test(l)){O("Alert!","Please enter a valid Notebook Name.");return}if((await D("fetchData",A,"SELECT name FROM S_Notebooks WHERE name = ? AND Type = 'Javascript'",[l])).length>0){O("Alert!","Notebook Name Already Exists");return}let y=await D("insertData",A,"INSERT INTO S_Notebooks (Name,Type,Status) VALUES (?, ?, ?) RETURNING NotebookId",[l,"Javascript","Active"]);await D("insertData",A,"INSERT INTO S_NotebookContent (CellContent, Name, NotebookId, CellType) VALUES (?, ?, ?, ?)",["",l,y,"javascript"]),document.getElementById("inputDiv").classList.add("d-none");let b=document.getElementById("jsListDiv"),C=S("li","py-0 ps-1",y,null),c=S("label","checkBox-label",null,S("span","fas fa-file-alt"),null);c.appendChild(document.createTextNode(l)),C.appendChild(c),b.appendChild(C);for(let L of b.querySelectorAll("li.selectedValue"))L.classList.remove("selectedValue");C.classList.add("selectedValue"),B.innerHTML="",await X(l),C.onclick=async function(L){for(let H of b.querySelectorAll("li.selectedValue"))H.classList.remove("selectedValue");this.classList.add("selectedValue"),B.innerHTML="";let P=document.getElementById("hideCode");if($){$=!1,await P.onclick();return}await X(this.innerText)}}}catch(l){console.error("Error adding notebook:",l)}};document.getElementById("deleteNotebook").onclick=function(){let a=document.getElementById("jsListDiv").querySelector("li.selectedValue");a?O("",`Are You Sure Want to Delete ${a.innerText}`,Pt.bind(null,a),1):O("Alert!","No Notebook Selected to delete")};async function Pt(a){let l=a.getAttribute("id");await D("deleteData",A,"DELETE FROM S_Notebooks WHERE NotebookId = ? ",[l]);const s=await D("deleteData",A,"DELETE FROM S_NotebookContent WHERE NotebookId = ? AND CellType = 'javascript'",[l]);for(let y of document.querySelectorAll("computelite-cell"))s&&y.remove();document.getElementById("jsListDiv").innerHTML="",await rt();let h=document.getElementById("jsListDiv").querySelector("li.selectedValue");await X(h.innerText)}document.getElementById("toggleSidebar").onclick=function(){document.getElementById("sidebarMenu").classList.toggle("contracted"),B.classList.toggle("cell-position"),document.getElementById("inputDiv").classList.add("d-none")};
